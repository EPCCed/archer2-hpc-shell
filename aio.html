<!DOCTYPE html>
<!-- START: inst/pkgdown/templates/layout.html --><!-- Generated by pkgdown: do not edit by hand --><html lang="en" data-bs-theme="auto">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<title>Introduction to Using the Shell in a HPC Context: All in One View</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="assets/themetoggle.js"></script><link rel="stylesheet" type="text/css" href="assets/styles.css">
<script src="assets/scripts.js" type="text/javascript"></script><!-- mathjax --><script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      config: ["MMLorHTML.js"],
      jax: ["input/TeX","input/MathML","output/HTML-CSS","output/NativeMML", "output/PreviewHTML"],
      extensions: ["tex2jax.js","mml2jax.js","MathMenu.js","MathZoom.js", "fast-preview.js", "AssistiveMML.js", "a11y/accessibility-menu.js"],
      TeX: {
        extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"]
      },
      tex2jax: {
        inlineMath: [['\\(', '\\)']],
        displayMath: [ ['$$','$$'], ['\\[', '\\]'] ],
        processEscapes: true
      }
    });
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><!-- Responsive Favicon for The Carpentries --><link rel="apple-touch-icon" sizes="180x180" href="favicons/incubator/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicons/incubator/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="favicons/incubator/favicon-16x16.png">
<link rel="manifest" href="favicons/incubator/site.webmanifest">
<link rel="mask-icon" href="favicons/incubator/safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" media="(prefers-color-scheme: light)" content="white">
<meta name="theme-color" media="(prefers-color-scheme: dark)" content="black">
</head>
<body>
    <header id="top" class="navbar navbar-expand-md top-nav incubator"><svg xmlns="http://www.w3.org/2000/svg" class="d-none"><symbol id="check2" viewbox="0 0 16 16"><path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"></path></symbol><symbol id="circle-half" viewbox="0 0 16 16"><path d="M8 15A7 7 0 1 0 8 1v14zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16z"></path></symbol><symbol id="moon-stars-fill" viewbox="0 0 16 16"><path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"></path><path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"></path></symbol><symbol id="sun-fill" viewbox="0 0 16 16"><path d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"></path></symbol></svg><a class="visually-hidden-focusable skip-link" href="#main-content">Skip to main content</a>
  <div class="container-fluid top-nav-container">
    <div class="col-md-8">
      <div class="large-logo">
        <img id="incubator-logo" alt="Carpentries Incubator" src="assets/images/incubator-logo.svg"><span class="badge text-bg-info">
          <abbr title="This lesson is in the beta phase, which means that it is ready for teaching by instructors outside of the original author team.">
            <a href="https://cdh.carpentries.org/the-lesson-life-cycle.html#polishing-beta-stage" class="external-link alert-link">
              <i aria-hidden="true" class="icon" data-feather="alert-circle" style="border-radius: 5px"></i>
              Beta
            </a>
            <span class="visually-hidden">This lesson is in the beta phase, which means that it is ready for teaching by instructors outside of the original author team.</span>
          </abbr>
        </span>

      </div>
    </div>
    <div class="selector-container">
      <div id="theme-selector">
        <li class="nav-item dropdown" id="theme-button-list">
          <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
            <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="bd-theme-text">
<li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                Light
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                Dark
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                Auto
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
          </ul>
</li>
      </div>

      <div class="dropdown" id="instructor-dropdown">
        <button class="btn btn-secondary dropdown-toggle bordered-button" type="button" id="dropdownMenu1" data-bs-toggle="dropdown" aria-expanded="false">
          <i aria-hidden="true" class="icon" data-feather="eye"></i> Learner View <i data-feather="chevron-down"></i>
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
<li><button class="dropdown-item" type="button" onclick="window.location.href='instructor/aio.html';">Instructor View</button></li>
        </ul>
</div>
    </div>
  </div>
  <hr></header><nav class="navbar navbar-expand-xl bottom-nav incubator" aria-label="Main Navigation"><div class="container-fluid nav-container">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle Navigation">
      <span class="navbar-toggler-icon"></span>
      <span class="menu-title">Menu</span>
    </button>
    <div class="nav-logo">
      <img class="small-logo" alt="Carpentries Incubator" src="assets/images/incubator-logo-sm.svg">
</div>
    <div class="lesson-title-md">
      Introduction to Using the Shell in a HPC Context
    </div>
    <div class="search-icon-sm">
      <!-- TODO: do not show until we have search
        <i role="img" aria-label="Search the All In One page" data-feather="search"></i>
      -->
    </div>
    <div class="desktop-nav">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
<li class="nav-item">
          <span class="lesson-title">
            Introduction to Using the Shell in a HPC Context
          </span>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="key-points.html">Key Points</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="reference.html#glossary">Glossary</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="profiles.html">Learner Profiles</a>
        </li>
        <li class="nav-item dropdown">
          <button class="nav-link dropdown-toggle" id="navbarDropdown" data-bs-toggle="dropdown" aria-expanded="false">
            More <i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
<li><a class="dropdown-item" href="reference.html">Reference</a></li>
          </ul>
</li>
      </ul>
</div>
    <!--
    <form class="d-flex col-md-2 search-form">
      <fieldset disabled>
      <input class="form-control me-2 searchbox" type="search" placeholder="" aria-label="">
        <button class="btn btn-outline-success tablet-search-button"  type="submit">
          <i class="search-icon" data-feather="search" role="img" aria-label="Search the All In One page"></i>
        </button>
      </fieldset>
    </form>
    -->
    <a id="search-button" class="btn btn-primary" href="aio.html" role="button" aria-label="Search the All In One page">Search the All In One page</a>
  </div>
<!--/div.container-fluid -->
</nav><div class="col-md-12 mobile-title">
  Introduction to Using the Shell in a HPC Context
</div>

<aside class="col-md-12 lesson-progress"><div style="width: %" class="percentage">
    %
  </div>
  <div class="progress incubator">
    <div class="progress-bar incubator" role="progressbar" style="width: %" aria-valuenow="" aria-label="Lesson Progress" aria-valuemin="0" aria-valuemax="100">
    </div>
  </div>
</aside><div class="container">
      <div class="row">
        <!-- START: inst/pkgdown/templates/navbar.html -->
<div id="sidebar-col" class="col-lg-4">
  <div id="sidebar" class="sidebar">
      <nav aria-labelledby="flush-headingEleven"><button role="button" aria-label="close menu" alt="close menu" aria-expanded="true" aria-controls="sidebar" class="collapse-toggle" data-collapse="Collapse " data-episodes="Episodes ">
          <i class="search-icon" data-feather="x" role="img"></i>
        </button>
        <div class="sidebar-inner">
          <div class="row mobile-row" id="theme-row-mobile">
            <div class="col" id="theme-selector">
              <li class="nav-item dropdown" id="theme-button-list">
                <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
                  <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><span class="d-lg-none ms-1" id="bd-theme-text">Toggle Theme</span>
                </button>
                <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="bd-theme-text">
<li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                      Light
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                      Dark
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                      <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                      Auto
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                </ul>
</li>
            </div>
          </div>
          <div class="row mobile-row">
            <div class="col">
              <div class="sidenav-view-selector">
                <div class="accordion accordion-flush" id="accordionFlush9">
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingNine">
                      <button class="accordion-button collapsed" id="instructor" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseNine" aria-expanded="false" aria-controls="flush-collapseNine">
                        <i id="eye" aria-hidden="true" class="icon" data-feather="eye"></i> Learner View
                      </button>
                    </h2>
                    <div id="flush-collapseNine" class="accordion-collapse collapse" aria-labelledby="flush-headingNine" data-bs-parent="#accordionFlush2">
                      <div class="accordion-body">
                        <a href="instructor/aio.html">Instructor View</a>
                      </div>
                    </div>
                  </div>
<!--/div.accordion-item-->
                </div>
<!--/div.accordion-flush-->
              </div>
<!--div.sidenav-view-selector -->
            </div>
<!--/div.col -->

            <hr>
</div>
<!--/div.mobile-row -->

          <div class="accordion accordion-flush" id="accordionFlush11">
            <div class="accordion-item">

              <button id="chapters" class="accordion-button show" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseEleven" aria-expanded="false" aria-controls="flush-collapseEleven">
                <h2 class="accordion-header chapters" id="flush-headingEleven">
                  EPISODES
                </h2>
              </button>
              <div id="flush-collapseEleven" class="accordion-collapse show collapse" aria-labelledby="flush-headingEleven" data-bs-parent="#accordionFlush11">

                <div class="accordion-body">
                  <div class="accordion accordion-flush" id="accordionFlush1">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading1">
        <a href="index.html">Summary and Setup</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush2">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading2">
        <a href="10-hpc-intro.html">1. Why Use HPC?</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush3">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading3">
        <a href="11-connecting.html">2. Connecting to the remote HPC system</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush4">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading4">
        <a href="13-navigation.html">3. Moving around and looking at things</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush5">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading5">
        <a href="14-files.html">4. Working with files</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush6">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading6">
        <a href="15-wildcards-pipes.html">5. Wildcards and pipes</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush7">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading7">
        <a href="16-scripts.html">6. Scripts, variables, and loops</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

                </div>
              </div>
            </div>

            <hr class="half-width">
<div class="accordion accordion-flush lesson-resources" id="accordionFlush12">
              <div class="accordion-item">
                <h2 class="accordion-header" id="flush-headingTwelve">
                  <button class="accordion-button collapsed" id="lesson-resources" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwelve" aria-expanded="false" aria-controls="flush-collapseTwelve">
                    RESOURCES
                  </button>
                </h2>
                <div id="flush-collapseTwelve" class="accordion-collapse collapse" aria-labelledby="flush-headingTwelve" data-bs-parent="#accordionFlush12">
                  <div class="accordion-body">
                    <ul>
<li>
                        <a href="key-points.html">Key Points</a>
                      </li>
                      <li>
                        <a href="reference.html#glossary">Glossary</a>
                      </li>
                      <li>
                        <a href="profiles.html">Learner Profiles</a>
                      </li>
                      <li><a href="reference.html">Reference</a></li>
                    </ul>
</div>
                </div>
              </div>
            </div>
            <hr class="half-width lesson-resources">
<a href="aio.html">See all in one page</a>


            <hr class="d-none d-sm-block d-md-none">
<div class="d-grid gap-1">

            </div>
          </div>
<!-- /div.accordion -->
        </div>
<!-- /div.sidebar-inner -->
      </nav>
</div>
<!-- /div.sidebar -->
  </div>
<!-- /div.sidebar-col -->
<!-- END:   inst/pkgdown/templates/navbar.html-->

        <!-- START: inst/pkgdown/templates/content-extra.html -->
  <div class="col-xl-8 col-lg-12 primary-content">
    <main id="main-content" class="main-content"><div class="container lesson-content">
        
        
<section id="aio-10-hpc-intro"><p>Content from <a href="10-hpc-intro.html">Why Use HPC?</a></p>
<hr>
<p>Last updated on 2024-11-13 |

        <a href="https://github.com/EPCCed/2024-10-30-hpc-shell-edinburgh/edit/main/episodes/10-hpc-intro.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>Why would I be interested in High Performance Computing (HPC)?</li>
<li>What can I expect to learn from this course?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Be able to describe what an HPC system is.</li>
<li>Identify how an HPC system could benefit you.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="why-use-these-computers">Why Use These Computers?<a class="anchor" aria-label="anchor" href="#why-use-these-computers"></a>
</h2>
<hr class="half-width">
<div id="what-do-you-need" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="what-do-you-need" class="callout-inner">
<h3 class="callout-title">What do you need?</h3>
<div class="callout-content">
<p>Talk to your neighbour about your research. How does computing help
you do your research? How could more computing help you do more or
better research?</p>
</div>
</div>
</div>
<p>Frequently, research problems that use computing can outgrow the
desktop or laptop computer where they started:</p>
<ul>
<li>A statistics student wants to do cross-validate their model. This
involves running the model 1000 times — but each run takes an hour.
Running on their laptop will take over a month!</li>
<li>A genomics researcher has been using small datasets of sequence
data, but soon will be receiving a new type of sequencing data that is
10 times as large. It’s already challenging to open the datasets on
their computer — analysing these larger datasets will probably crash
it.</li>
<li>An engineer is using a fluid dynamics package that has an option to
run in parallel. So far, they haven’t used this option on their desktop,
but in going from 2D to 3D simulations, simulation time has more than
tripled and it might be useful to take advantage of that feature.</li>
</ul>
<p>In all these cases, what is needed is access to more computers than
can be used at the same time. Luckily, large scale computing systems —
shared computing resources with lots of computers — are available at
many universities, labs, or through national networks. These resources
usually have more central processing units(CPUs), CPUs that operate at
higher speeds, more memory, more storage, and faster connections with
other computer systems. They are frequently called “clusters”,
“supercomputers” or resources for “high performance computing” or HPC.
In this lesson, we will usually use the terminology of HPC and HPC
cluster.</p>
<p>Using a cluster often has the following advantages for
researchers:</p>
<ul>
<li>
<strong>Speed.</strong> With many more CPU cores, often with higher
performance specs, than a typical laptop or desktop, HPC systems can
offer significant speed up.</li>
<li>
<strong>Volume.</strong> Many HPC systems have both the processing
memory (RAM) and disk storage to handle very large amounts of data.
Terabytes of RAM and petabytes of storage are available for research
projects.</li>
<li>
<strong>Efficiency.</strong> Many HPC systems operate a pool of
resources that are drawn on by many users. In most cases when the pool
is large and diverse enough the resources on the system are used almost
constantly.</li>
<li>
<strong>Cost.</strong> Bulk purchasing and government funding mean
that the cost to the research community for using these systems in
significantly less that it would be otherwise.</li>
<li>
<strong>Convenience.</strong> Maybe your calculations just take a
long time to run or are otherwise inconvenient to run on your personal
computer. There’s no need to tie up your own computer for hours when you
can use someone else’s instead.</li>
</ul>
<p>This is how a large-scale compute system like a cluster can help
solve problems like those listed at the start of the lesson.</p>
<div id="thinking-ahead" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="thinking-ahead" class="callout-inner">
<h3 class="callout-title">Thinking ahead</h3>
<div class="callout-content">
<p>How do you think using a large-scale computing system will be
different from using your laptop? Talk to your neighbour about some
differences you may already know about, and some
differences/difficulties you imagine you may run into.</p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="on-command-line">On Command Line<a class="anchor" aria-label="anchor" href="#on-command-line"></a>
</h2>
<hr class="half-width">
<p>Using HPC systems often involves the use of a shell through a command
line interface (CLI) and either specialized software or programming
techniques. The shell is a program with the special role of having the
job of running other programs rather than doing calculations or similar
tasks itself. What the user types goes into the shell, which then
figures out what commands to run and orders the computer to execute
them. (Note that the shell is called “the shell” because it encloses the
operating system in order to hide some of its complexity and make it
simpler to interact with.) The most popular Unix shell is Bash, the
Bourne Again SHell (so-called because it’s derived from a shell written
by Stephen Bourne). Bash is the default shell on most modern
implementations of Unix and in most packages that provide Unix-like
tools for Windows.</p>
<p>Interacting with the shell is done via a command line interface (CLI)
on most HPC systems. In the earliest days of computers, the only way to
interact with early computers was to rewire them. From the 1950s to the
1980s most people used line printers. These devices only allowed input
and output of the letters, numbers, and punctuation found on a standard
keyboard, so programming languages and software interfaces had to be
designed around that constraint and text-based interfaces were the way
to do this. A typing-based interface is often called a
<strong>command-line interface</strong>, or CLI, to distinguish it from
a <strong>graphical user interface</strong>, or GUI, which most people
now use. The heart of a CLI is a <strong>read-evaluate-print
loop</strong>, or REPL: when the user types a command and then presses
the <kbd>Enter</kbd> key, the computer reads it, executes it, and prints
its output. The user then types another command, and so on until the
user logs off.</p>
<p>Learning to use Bash or any other shell sometimes feels more like
programming than like using a mouse. Commands are terse (often only a
couple of characters long), their names are frequently cryptic, and
their output is lines of text rather than something visual like a graph.
However, using a command line interface can be extremely powerful, and
learning how to use one will allow you to reap the benefits described
above.</p>
</section><section><h2 class="section-heading" id="the-rest-of-this-lesson">The rest of this lesson<a class="anchor" aria-label="anchor" href="#the-rest-of-this-lesson"></a>
</h2>
<hr class="half-width">
<p>The only way to use these types of resources is by learning to use
the command line. This introduction to HPC systems has two parts:</p>
<ul>
<li>We will learn to use the UNIX command line or shell (commonly just
called Bash - although this is just one implementation).</li>
<li>We will use our new Bash skills to connect to and operate a
high-performance computing supercomputer.</li>
</ul>
<p>The skills we learn here have other uses beyond just HPC: Bash and
UNIX skills are used everywhere, be it for web development, running
software, or operating servers. It’s become so essential that Microsoft
now <a href="https://www.microsoft.com/en-us/store/p/ubuntu/9nblggh4msv6" class="external-link">ships
it as part of Windows</a>! Knowing how to use Bash and HPC systems will
allow you to operate virtually any modern device. With all of this in
mind, let’s connect to a cluster and get started!</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>High Performance Computing (HPC) typically involves connecting to
very large computing systems elsewhere in the world.</li>
<li>These HPC systems can be used to do work that would either be
impossible or much slower on smaller systems.</li>
<li>The standard method of interacting with such systems is via a
command line interface such as Bash.</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.

use like [gitbash][gitbash]
 -->
</section></section><section id="aio-11-connecting"><p>Content from <a href="11-connecting.html">Connecting to the remote HPC system</a></p>
<hr>
<p>Last updated on 2024-11-13 |

        <a href="https://github.com/EPCCed/2024-10-30-hpc-shell-edinburgh/edit/main/episodes/11-connecting.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How do I open a terminal?</li>
<li>How do I connect to a remote computer?</li>
<li>What is an SSH key?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Connect to a remote HPC system.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="opening-a-terminal">Opening a Terminal<a class="anchor" aria-label="anchor" href="#opening-a-terminal"></a>
</h2>
<hr class="half-width">
<p>Connecting to an HPC system is most often done through a tool known
as “SSH” (Secure SHell) and usually SSH is run through a terminal. So,
to begin using an HPC system we need to begin by opening a terminal.
Different operating systems have different terminals, none of which are
exactly the same in terms of their features and abilities while working
on the operating system. When connected to the remote system the
experience between terminals will be identical as each will faithfully
present the same experience of using that system.</p>
<p>Here is the process for opening a terminal in each operating
system.</p>
<div class="tabs">
<nav><div id="nav-tab-1" class="nav nav-tabs" role="tablist">
<button class="nav-link active" id="nav-tab-1-1" data-bs-toggle="tab" data-bs-target="#nav-tabpanel-1-1" type="button" role="tab" aria-controls="nav-tabpanel-1-1" aria-selected="true">
  <h3 class="tab-header" id="nav-tab-heading-1-1">
  Linux
  </h3>
</button>
<button class="nav-link" id="nav-tab-1-2" data-bs-toggle="tab" data-bs-target="#nav-tabpanel-1-2" type="button" role="tab" aria-controls="nav-tabpanel-1-2" aria-selected="false">
  <h3 class="tab-header" id="nav-tab-heading-1-2">
  Mac
  </h3>
</button>
<button class="nav-link" id="nav-tab-1-3" data-bs-toggle="tab" data-bs-target="#nav-tabpanel-1-3" type="button" role="tab" aria-controls="nav-tabpanel-1-3" aria-selected="false">
  <h3 class="tab-header" id="nav-tab-heading-1-3">
  Windows
  </h3>
</button>
</div>
</nav><div id="nav-tabContent-1" class="tab-content">
<div id="nav-tabpanel-1-1" class="tab-pane show active" role="tabpanel" aria-labelledby="nav-tab-1-1">
<p>There are many different versions (aka “flavours”) of Linux and how
to open a terminal window can change between flavours. Fortunately most
Linux users already know how to open a terminal window since it is a
common part of the workflow for Linux users. If this is something that
you do not know how to do then a quick search on the Internet for “how
to open a terminal window in” with your particular Linux flavour
appended to the end should quickly give you the directions you need.</p>
</div>
<div id="nav-tabpanel-1-2" class="tab-pane" role="tabpanel" aria-labelledby="nav-tab-1-2">
<p>Macs have had a terminal built in since the first version of OS X
since it is built on a UNIX-like operating system, leveraging many parts
from BSD (Berkeley Software Distribution). The terminal can be quickly
opened through the use of the Searchlight tool. Hold down the
<kbd>Command</kbd> key and press <kbd>Space</kbd>. In the search bar
that shows up type “terminal”, choose the terminal app from the list of
results (it will look like a tiny, black computer screen) and you will
be presented with a terminal window. Alternatively, you can find
Terminal under “Utilities” in the Applications menu.</p>
</div>
<div id="nav-tabpanel-1-3" class="tab-pane" role="tabpanel" aria-labelledby="nav-tab-1-3">
<p>While Windows does have a command-line interface known as the
“Command Prompt” that has its roots in MS-DOS (Microsoft Disk Operating
System) it does not have an SSH tool built into it and so one needs to
be installed. There are a variety of programs that can be used for this;
a few common ones we describe here, as follows:</p>
<p><strong>MobaXterm</strong></p>
<p>MobaXterm is a terminal window emulator for Windows and the home
edition can be downloaded for free from <a href="" title="https://mobaxterm.mobatek.net/download-home-edition.html">mobatek.net</a>.
If you follow the link you will note that there are two editions of the
home version available: Portable and Installer. The portable edition
puts all MobaXterm content in a folder on the desktop (or anywhere else
you would like it) so that it is easy to add plug-ins or remove the
software. The installer edition adds MobaXterm to your Windows
installation and menu as any other program you might install. If you are
not sure that you will continue to use MobaXterm in the future, the
portable edition is likely the best choice for you.</p>
<p>Download the version that you would like to use and install it as you
would any other software on your Windows installation. Once the software
is installed you can run it by either opening the folder installed with
the portable edition and double-clicking on the executable file named
<code>MobaXterm_Personal_11.1</code> (your version number may vary) or,
if the installer edition was used, finding the executable through either
the start menu or the Windows search option.</p>
<p>Once the MobaXterm window is open you should see a large button in
the middle of that window with the text “Start Local Terminal”. Click
this button and you will have a terminal window at your disposal.</p>
<p><strong>Git BASH</strong></p>
<p>Git BASH gives you a terminal like interface in Windows. You can use
this to connect to a remote computer via SSH. It can be downloaded for
free from <a href="https://gitforwindows.org/" class="external-link">here</a>.</p>
<p><strong>Windows Subsystem for Linux</strong></p>
<p>The Windows Subsystem for Linux also allows you to connect to a
remote computer via SSH. Instructions on installing it can be found <a href="https://docs.microsoft.com/en-us/windows/wsl/install-win10" class="external-link">here</a>.</p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="creating-a-ssh-key">Creating a SSH key<a class="anchor" aria-label="anchor" href="#creating-a-ssh-key"></a>
</h2>
<hr class="half-width">
<p>SSH keys are an alternative method for authentication to obtain
access to remote computing systems. They can also be used for
authentication when transferring files or for accessing version control
systems. In this section you will create a pair of SSH keys, a private
key which you keep on your own computer and a public key which is placed
on the remote HPC system that you will log in to.</p>
<div class="section level3">
<h3 id="linux-mac-and-windows-subsystem-for-linux">Linux, Mac and Windows Subsystem for Linux<a class="anchor" aria-label="anchor" href="#linux-mac-and-windows-subsystem-for-linux"></a>
</h3>
<p>Once you have opened a terminal check for existing SSH keys and
filenames since existing SSH keys are overwritten,</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="ex">$</span> ls ~/.ssh/</span></code></pre>
</div>
<p>then generate a new public-private key pair,</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="ex">$</span> ssh-keygen <span class="at">-o</span> <span class="at">-a</span> 100 <span class="at">-t</span> rsa <span class="at">-b</span> 4096 <span class="at">-f</span> ~/.ssh/id_ARCHER2_rsa</span></code></pre>
</div>
<ul>
<li>
<code>-o</code> (no default): use the OpenSSH key format, rather
than PEM.</li>
<li>
<code>-a</code> (default is 16): number of rounds of passphrase
derivation; increase to slow down brute force attacks.</li>
<li>
<code>-t</code> (default is <a href="https://en.wikipedia.org/wiki/RSA_(cryptosystem)" class="external-link">rsa</a>):
specify the “type” or cryptographic algorithm. <a href="https://en.wikipedia.org/wiki/EdDSA" class="external-link">ed25519</a> is faster and
shorter than RSA for comparable strength.</li>
<li>
<code>-f</code> (default is /home/user/.ssh/id_algorithm): filename
to store your keys. If you already have SSH keys, make sure you specify
a different name: <code>ssh-keygen</code> will overwrite the default key
if you don’t specify!</li>
</ul>
<p>The flag <code>-b</code> sets the number of bits in the key. The
default is 2048. EdDSA uses a fixed key length, so this flag would have
no effect.</p>
<p>When prompted, enter a strong password that you will remember.
Cryptography is only as good as the weakest link, and this will be used
to connect to a powerful, precious, computational resource.</p>
<p>Take a look in <code>~/.ssh</code> (use <code>ls ~/.ssh</code>). You
should see the two new files: your private key
(<code>~/.ssh/key_ARCHER2_rsa</code>) and the public key
(<code>~/.ssh/key_ARCHER2_rsa.pub</code>). If a key is requested by the
system administrators, the <em>public</em> key is the one to
provide.</p>
<div id="private-keys-are-private" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="private-keys-are-private" class="callout-inner">
<h3 class="callout-title">PRIVATE KEYS ARE PRIVATE</h3>
<div class="callout-content">
<p>A private key that is visible to anyone but you should be considered
compromised, and must be destroyed. This includes having improper
permissions on the directory it (or a copy) is stored in, traversing any
network in the clear, attachment on unencrypted email, and even
displaying the key (which is ASCII text) in your terminal window.</p>
<p>Protect this key as if it unlocks your front door. In many ways, it
does.</p>
</div>
</div>
</div>
<div id="further-information" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="further-information" class="callout-inner">
<h3 class="callout-title">Further information</h3>
<div class="callout-content">
<p>For more information on SSH security and some of the flags set here,
an excellent resource is <a href="https://stribika.github.io/2015/01/04/secure-secure-shell.html" class="external-link">Secure
Secure Shell</a>.</p>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="windows-1">Windows<a class="anchor" aria-label="anchor" href="#windows-1"></a>
</h3>
<p>On Windows you can use</p>
<ul>
<li>puttygen, see the Putty <a href="https://www.chiark.greenend.org.uk/~sgtatham/putty/docs.html" class="external-link">documentation</a>
</li>
<li>MobaKeyGen, see the MobaXterm <a href="https://mobaxterm.mobatek.net/documentation.html" class="external-link">documentation</a>
</li>
</ul>
</div>
</section><section><h2 class="section-heading" id="logging-onto-the-system">Logging onto the system<a class="anchor" aria-label="anchor" href="#logging-onto-the-system"></a>
</h2>
<hr class="half-width">
<p>With all of this in mind, let’s connect to a remote HPC system. In
this workshop, we will connect to ARCHER2 — an HPC system located at the
University of Edinburgh. Although it’s unlikely that every system will
be exactly like ARCHER2, it’s a very good example of what you can expect
from an HPC installation. To connect to our example computer, we will
use SSH (if you are using PuTTY, see above).</p>
<p>SSH allows us to connect to UNIX computers remotely, and use them as
if they were our own. The general syntax of the connection command
follows the format
<code>ssh -i ~/.ssh/key_for_remote_computer yourUsername@remote.computer.address</code>
when using SSH keys and
<code>ssh yourUsername@some.computer.address</code> if only password
access is available. Let’s attempt to connect to the HPC system now:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="fu">ssh</span> <span class="at">-i</span> ~/.ssh/key_ARCHER2_ed25519 yourUsername@login.archer2.ac.uk</span></code></pre>
</div>
<p>or</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="fu">ssh</span> <span class="at">-i</span> ~/.ssh/key_ARCHER2_rsa yourUsername@login.archer2.ac.uk</span></code></pre>
</div>
<p>or if SSH keys have not been enabled</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="fu">ssh</span> yourUsername@ARCHER2</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>This node is running Cray's Linux Environment version 1.3.2

#######################################################################################

        @@@@@@@@@
     @@@         @@@            _      ____     ____   _   _   _____   ____    ____
   @@@    @@@@@    @@@         / \    |  _ \   / ___| | | | | | ____| |  _ \  |___ \
  @@@   @@     @@   @@@       / _ \   | |_) | | |     | |_| | |  _|   | |_) |   __) |
  @@   @@  @@@  @@   @@      / ___ \  |  _ &lt;  | |___  |  _  | | |___  |  _ &lt;   / __/
  @@   @@  @@@  @@   @@     /_/   \_\ |_| \_\  \____| |_| |_| |_____| |_| \_\ |_____|
  @@@   @@     @@   @@@
   @@@    @@@@@    @@@       https://www.archer2.ac.uk/support-access/
     @@@         @@@
        @@@@@@@@@

 -         U K R I         -        E P C C        -         H P E   C r a y         -

Hostname:     uan01
Distribution: SLES 15.1 1
CPUS:         256
Memory:       257.4GB
Configured:   2021-04-27

######################################################################################</code></pre>
</div>
<p>If you’ve connected successfully, you should see a prompt like the
one below. This prompt is informative, and lets you grasp certain
information at a glance. (If you don’t understand what these things are,
don’t worry! We will cover things in depth as we explore the system
further.)</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="ex">userid@ln03:~</span><span class="op">&gt;</span></span></code></pre>
</div>
</section><section><h2 class="section-heading" id="telling-the-difference-between-the-local-terminal-and-the-remote-terminal">Telling the Difference between the Local Terminal and the Remote
Terminal<a class="anchor" aria-label="anchor" href="#telling-the-difference-between-the-local-terminal-and-the-remote-terminal"></a>
</h2>
<hr class="half-width">
<p>You may have noticed that the prompt changed when you logged into the
remote system using the terminal (if you logged in using PuTTY this will
not apply because it does not offer a local terminal). This change is
important because it makes it clear on which system the commands you
type will be run when you pass them into the terminal. This change is
also a small complication that we will need to navigate throughout the
workshop. Exactly what is reported before the <code>$</code> in the
terminal when it is connected to the local system and the remote system
will typically be different for every user. We still need to indicate
which system we are entering commands on though so we will adopt the
following convention:</p>
<ul>
<li>
<code>[local]$</code> when the command is to be entered on a
terminal connected to your local computer</li>
<li>
<code>userid@ln03:~&gt;</code> when the command is to be entered on
a terminal connected to the remote system</li>
<li>
<code>$</code> when it really doesn’t matter which system the
terminal is connected to.</li>
</ul>
<div id="being-certain-which-system-your-terminal-is-connected-to" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="being-certain-which-system-your-terminal-is-connected-to" class="callout-inner">
<h3 class="callout-title">Being certain which system your terminal is connected to</h3>
<div class="callout-content">
<p>If you ever need to be certain which system a terminal you are using
is connected to then use the <code>hostname</code> command.</p>
</div>
</div>
</div>
<div id="keep-two-terminal-windows-open" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="keep-two-terminal-windows-open" class="callout-inner">
<h3 class="callout-title">Keep two terminal windows open</h3>
<div class="callout-content">
<p>It is strongly recommended that you have two terminals open, one
connected to the local system and one connected to the remote system,
that you can switch back and forth between. If you only use one terminal
window then you will need to reconnect to the remote system using one of
the methods above when you see a change from <code>[local]$</code> to <a href="mailto:userid@ln03" class="email">userid@ln03</a>:~&gt; and
disconnect when you see the reverse.</p>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>To connect to a remote HPC system using SSH and a password, run</li>
</ul>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="fu">ssh</span> yourUsername@remote.computer.address</span></code></pre>
</div>
<ul>
<li>To connect to a remote HPC system using SSH and an SSH key, run</li>
</ul>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="fu">ssh</span> <span class="at">-i</span> ~/.ssh/key_for_remote_computer yourUsername@remote.computer.address</span></code></pre>
</div>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.

use like [gitbash][gitbash]
 -->
</section></section><section id="aio-13-navigation"><p>Content from <a href="13-navigation.html">Moving around and looking at things</a></p>
<hr>
<p>Last updated on 2024-11-13 |

        <a href="https://github.com/EPCCed/2024-10-30-hpc-shell-edinburgh/edit/main/episodes/13-navigation.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How do I navigate and look around the system?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Learn how to navigate around directories and look at their
contents</li>
<li>Explain the difference between a file and a directory.</li>
<li>Translate an absolute path into a relative path and vice versa.</li>
<li>Identify the actual command, flags, and filenames in a command-line
call.</li>
<li>Demonstrate the use of tab completion, and explain its
advantages.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="first-commands">First commands<a class="anchor" aria-label="anchor" href="#first-commands"></a>
</h2>
<hr class="half-width">
<p>At this point in the lesson, we’ve just logged into the system.
Nothing has happened yet, and we’re not going to be able to do anything
until we learn a few basic commands. By the end of this lesson, you will
know how to “move around” the system and look at what’s there.</p>
<p>Right now, all we see is something that looks like this:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="ex">userid@ln03:~</span><span class="op">&gt;</span></span></code></pre>
</div>
<p>The dollar sign is a <strong>prompt</strong>, which shows us that the
shell is waiting for input; your shell may use a different character as
a prompt and may add information before the prompt. When typing
commands, either from these lessons or from other sources, do not type
the prompt, only the commands that follow it.</p>
<p>Type the command <code>whoami</code>, then press the <kbd>Enter</kbd>
key (sometimes marked Return) to send the command to the shell. The
command’s output is the ID of the current user, i.e., it shows us who
the shell thinks we are:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="ex">userid@ln03:~</span><span class="op">&gt;</span> whoami</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">yourUsername</span></span></code></pre>
</div>
<p>More specifically, when we type <code>whoami</code> into the
shell:</p>
<ol style="list-style-type: decimal">
<li>finds a program called <code>whoami</code>,</li>
<li>runs that program,</li>
<li>displays that program’s output, then</li>
<li>displays a new prompt to tell us that it’s ready for more
commands.</li>
</ol>
<p>Next, let’s find out where we are by running a command called
<code>pwd</code> (which stands for “print working directory”).
(“Directory” is another word for “folder”). At any moment, our
<strong>current working directory</strong> (where we are) is the
directory that the computer assumes we want to run commands in unless we
explicitly specify something else. Here, the computer’s response is
<code>/home/ta180/ta180/yourUsername</code>, which is your user’s
<strong>home directory</strong>. Note that the absolute location of your
home directory may differ from system to system.</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="ex">$</span> pwd</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>/home/ta180/ta180/yourUsername</code></pre>
</div>
</section><section><h2 class="section-heading" id="list-directory-contents">List directory contents<a class="anchor" aria-label="anchor" href="#list-directory-contents"></a>
</h2>
<hr class="half-width">
<p>So, we know where we are. How do we look and see what’s in our
current directory?</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="ex">$</span> ls</span></code></pre>
</div>
<p><code>ls</code> prints the names of the files and directories in the
current directory in alphabetical order, arranged neatly into
columns.</p>
<div id="differences-between-remote-and-local-system" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="differences-between-remote-and-local-system" class="callout-inner">
<h3 class="callout-title">Differences between remote and local system</h3>
<div class="callout-content">
<p>Open a second terminal window on your local computer and run the
<code>ls</code> command without logging in remotely. What differences do
you see?</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<p>You would likely see something more like this:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Applications Documents    Library      Music        Public
Desktop      Downloads    Movies       Pictures</code></pre>
</div>
<p>In addition you should also note that the preamble before the prompt
(<code>$</code>) is different. This is very important for making sure
you know what system you are issuing commands on when in the shell.</p>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="making-directories">Making directories<a class="anchor" aria-label="anchor" href="#making-directories"></a>
</h2>
<hr class="half-width">
<p>If nothing shows up when you run <code>ls</code>, it means that
nothing’s there. Let’s make a directory for us to play with.</p>
<p><code>mkdir &lt;new directory name&gt;</code> makes a new directory
with that name in your current location. Notice that this command
required two pieces of input: the actual name of the command
(<code>mkdir</code>) and an argument that specifies the name of the
directory you wish to create.</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="ex">$</span> mkdir documents</span></code></pre>
</div>
<p>Let’s use <code>ls</code> again. What do we see?</p>
<p>Our folder is there, awesome. What if we wanted to go inside it and
do stuff there? We will use the <code>cd</code> (change directory)
command to move around. Let’s <code>cd</code> into our new documents
folder.</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="ex">$</span> cd documents</span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a><span class="ex">$</span> pwd</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>~/documents</code></pre>
</div>
</section><section><h2 class="section-heading" id="the-tilde">The tilde ~<a class="anchor" aria-label="anchor" href="#the-tilde"></a>
</h2>
<hr class="half-width">
<p>What is the <code>~</code> character? When using the shell,
<code>~</code> is a shortcut that represents
<code>/home/ta180/ta180/yourUserName</code>.</p>
<p>Now that we know how to use <code>cd</code>, we can go anywhere.
That’s a lot of responsibility. What happens if we get “lost” and want
to get back to where we started?</p>
<p>To go back to your home directory, the following three commands will
work:</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="ex">$</span> cd /home/ta180/ta180/yourUserName</span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a><span class="ex">$</span> cd ~</span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a><span class="ex">$</span> cd</span></code></pre>
</div>
<p>A quick note on the structure of a UNIX
(Linux/Mac/Android/Solaris/etc) filesystem. Directories and absolute
paths (i.e. exact position in the system) are always prefixed with a
<code>/</code>. <code>/</code> by itself is the “root” or base
directory.</p>
<p>Let’s go there now, look around, and then return to our home
directory.</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="ex">$</span> cd /</span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a><span class="ex">$</span> ls</span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a><span class="ex">$</span> cd ~</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>bin    dev   initrd  local         mnt  proc     root  scratch  tmp  work
boot   etc   lib     localscratch  nix  project  run   srv      usr
cvmfs  home  lib64   media         opt  ram      sbin  sys      var</code></pre>
</div>
<p>The “home” directory is the one where we generally want to keep all
of our files. Other folders on a UNIX OS contain system files, and get
modified and changed as you install new software or upgrade your OS.</p>
<div id="using-hpc-filesystems" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="using-hpc-filesystems" class="callout-inner">
<h3 class="callout-title">Using HPC filesystems</h3>
<div class="callout-content">
<p>On HPC systems, you have a number of places where you can store your
files. These differ in both the amount of space allocated and whether or
not they are backed up. File storage locations:</p>
<ul>
<li>
<strong>Network filesystem</strong> - Your home directory is an
example of a network filesystem. Data stored here is available
throughout the HPC system and files stored here are often backed up (but
check your local configuration to be sure!). Files stored here are
typically slower to access, the data is actually stored on another
computer and is being transmitted and made available over the
network!</li>
<li>
<strong>Scratch</strong> - Some systems may offer “scratch” space.
Scratch space is typically faster to use than your home directory or
network filesystem, but is not usually backed up, and should not be used
for long term storage.</li>
<li>
<strong>Work file system</strong> - As an alternative to (or
sometimes as well as) scratch space, some HPC systems offer fast file
system access as a work file system. Typically, this will have higher
performance than your home directory or network file system and may not
be backed up. It differs from scratch space in that files in a work file
system are not automatically deleted for you, you must manage the space
yourself.</li>
<li>
<strong>Local scratch (job only)</strong> - Some systems may offer
local scratch space while executing a job. (A job is a program which you
submit to run on an HPC system, and will be covered later.) Such storage
is very fast, but will be deleted at the end of your job.</li>
<li>
<strong>Ramdisk (job only)</strong> - Some systems may let you store
files in a “RAM disk” while running a job, where files are stored
directly in the computer’s memory. This extremely fast, but files stored
here will count against your job’s memory usage and be deleted at the
end of your job.</li>
</ul>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="navigation-shortcuts">Navigation shortcuts<a class="anchor" aria-label="anchor" href="#navigation-shortcuts"></a>
</h2>
<hr class="half-width">
<p>There are several other useful shortcuts you should be aware of.</p>
<ul>
<li>
<code>.</code> represents your current directory</li>
<li>
<code>..</code> represents the “parent” directory of your current
location</li>
<li>While typing nearly <em>anything</em>, you can have bash try to
autocomplete what you are typing by pressing the <kbd>tab</kbd>
key.</li>
</ul>
<p>Let’s try these out now:</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="ex">$</span> cd ./documents</span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a><span class="ex">$</span> pwd</span>
<span id="cb14-3"><a href="#cb14-3" tabindex="-1"></a><span class="ex">$</span> cd ..</span>
<span id="cb14-4"><a href="#cb14-4" tabindex="-1"></a><span class="ex">$</span> pwd</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>/home/ta180/ta180/yourUserName/documents
/home/ta180/ta180/yourUserName</code></pre>
</div>
</section><section><h2 class="section-heading" id="command-flags-and-options">Command flags and options<a class="anchor" aria-label="anchor" href="#command-flags-and-options"></a>
</h2>
<hr class="half-width">
<p>Many commands also have multiple behaviours that you can invoke with
command line ‘flags.’ What is a flag? It’s generally just your command
followed by a ‘-’ and the name of the flag (sometimes it’s ‘–’ followed
by the name of the flag). You follow the flag(s) with any additional
arguments you might need.</p>
<p>We’re going to demonstrate a couple of these “flags” using
<code>ls</code>.</p>
<p>Show hidden files with <code>-a</code>. Hidden files are files that
begin with <code>.</code>, these files will not appear otherwise, but
that doesn’t mean they aren’t there! “Hidden” files are not hidden for
security purposes, they are usually just config files and other
tempfiles that the user doesn’t necessarily need to see all the
time.</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="ex">$</span> ls <span class="at">-a</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>.  ..  .bash_logout  .bash_profile  .bashrc  documents  .emacs  .mozilla  .ssh</code></pre>
</div>
<p>Notice how both <code>.</code> and <code>..</code> are visible as
hidden files. Show files, their size in bytes, date last modified,
permissions, and other things with <code>-l</code>.</p>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a><span class="ex">$</span> ls <span class="at">-l</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>drwxr-xr-x 2 yourUsername tc001 4096 Jan 14 17:31 documents</code></pre>
</div>
<p>This is a lot of information to take in at once, but we will explain
this later! <code>ls -l</code> is <em>extremely</em> useful, and tells
you almost everything you need to know about your files without actually
looking at them.</p>
<p>We can also use multiple flags at the same time!</p>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a><span class="ex">$</span> ls <span class="at">-l</span> <span class="at">-a</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>userid@ln03:~&gt; ls -la
total 36
drwx--S--- 5 yourUsername tc001 4096 Nov 28 09:58 .
drwxr-x--- 3 root         tc001 4096 Nov 28 09:40 ..
-rw-r--r-- 1 yourUsername tc001   18 Dec  6  2016 .bash_logout
-rw-r--r-- 1 yourUsername tc001  193 Dec  6  2016 .bash_profile
-rw-r--r-- 1 yourUsername tc001  231 Dec  6  2016 .bashrc
drwxr-sr-x 2 yourUsername tc001 4096 Nov 28 09:58 documents
-rw-r--r-- 1 yourUsername tc001  334 Mar  3  2017 .emacs
drwxr-xr-x 4 yourUsername tc001 4096 Aug  2  2016 .mozilla
drwx--S--- 2 yourUsername tc001 4096 Nov 28 09:58 .ssh</code></pre>
</div>
<p>Flags generally precede any arguments passed to a UNIX command.
<code>ls</code> actually takes an extra argument that specifies a
directory to look into. When you use flags and arguments together, the
syntax (how it’s supposed to be typed) generally looks something like
this:</p>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a><span class="ex">$</span> command <span class="op">&lt;</span>flags/options<span class="op">&gt;</span> <span class="op">&lt;</span>arguments<span class="op">&gt;</span></span></code></pre>
</div>
<p>So using <code>ls -l -a</code> on a different directory than the one
we’re in would look something like:</p>
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb23-1"><a href="#cb23-1" tabindex="-1"></a><span class="ex">$</span> ls <span class="at">-l</span> <span class="at">-a</span> ~/documents</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>drwxr-sr-x 2 yourUsername tc001 4096 Nov 28 09:58 .
drwx--S--- 5 yourUsername tc001 4096 Nov 28 09:58 ..</code></pre>
</div>
</section><section><h2 class="section-heading" id="where-to-go-for-help">Where to go for help?<a class="anchor" aria-label="anchor" href="#where-to-go-for-help"></a>
</h2>
<hr class="half-width">
<p>How did I know about the <code>-l</code> and <code>-a</code> options?
Is there a manual we can look at for help when we need help? There is a
very helpful manual for most UNIX commands: <code>man</code> (if you’ve
ever heard of a “man page” for something, this is what it is).</p>
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb25-1"><a href="#cb25-1" tabindex="-1"></a><span class="ex">$</span> man ls</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>LS(1)                          User Commands                          LS(1)

NAME
     ls - list directory contents

SYNOPSIS
     ls [OPTION]... [FILE]...

DESCRIPTION
     List  information  about the FILEs (the current directory by default).
     Sort entries alphabetically if none of -cftuvSUX nor --sort is specified.

     Mandatory arguments to long options are mandatory for short options too.</code></pre>
</div>
<p>To navigate through the <code>man</code> pages, you may use the up
and down arrow keys to move line-by-line, or try the <kbd>Space</kbd>
and <kbd>b</kbd> keys to skip up and down by full page. Quit the
<code>man</code> pages by typing <kbd>q</kbd>.</p>
<p>Alternatively, most commands you run will have a <code>--help</code>
option that displays addition information For instance, with
<code>ls</code>:</p>
<div class="codewrapper sourceCode" id="cb27">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb27-1"><a href="#cb27-1" tabindex="-1"></a><span class="ex">$</span> ls <span class="at">--help</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Usage: ls [OPTION]... [FILE]...
List information about the FILEs (the current directory by default).
Sort entries alphabetically if none of -cftuvSUX nor --sort is specified.

Mandatory arguments to long options are mandatory for short options too.
  -a, --all                  do not ignore entries starting with .
  -A, --almost-all           do not list implied . and ..
      --author               with -l, print the author of each file
  -b, --escape               print C-style escapes for nongraphic characters
      --block-size=SIZE      scale sizes by SIZE before printing them; e.g.,
                               '--block-size=M' prints sizes in units of
                               1,048,576 bytes; see SIZE format below
  -B, --ignore-backups       do not list implied entries ending with ~

# further output omitted for clarity</code></pre>
</div>
<div id="unsupported-command-line-options" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="unsupported-command-line-options" class="callout-inner">
<h3 class="callout-title">Unsupported command-line options</h3>
<div class="callout-content">
<p>If you try to use an option that is not supported, <code>ls</code>
and other programs will print an error message similar to this:</p>
<div class="codewrapper sourceCode" id="cb29">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb29-1"><a href="#cb29-1" tabindex="-1"></a><span class="ex">[remote]$</span> ls <span class="at">-j</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>ls: invalid option -- 'j'
Try 'ls --help' for more information.</code></pre>
</div>
<div class="section level3">
<h3 id="looking-at-documentation">Looking at documentation<a class="anchor" aria-label="anchor" href="#looking-at-documentation"></a>
</h3>
<p>Looking at the man page for <code>ls</code> or using
<code>ls --help</code>, what does the <code>-h</code>
(<code>--human-readable</code>) option do?</p>
</div>
<div class="section level3">
<h3 id="absolute-vs-relative-paths">Absolute vs Relative Paths<a class="anchor" aria-label="anchor" href="#absolute-vs-relative-paths"></a>
</h3>
<p>Starting from <code>/Users/amanda/data/</code>, which of the
following commands could Amanda use to navigate to her home directory,
which is <code>/Users/amanda</code>?</p>
<ol style="list-style-type: decimal">
<li><code>cd .</code></li>
<li><code>cd /</code></li>
<li><code>cd /home/amanda</code></li>
<li><code>cd ../..</code></li>
<li><code>cd ~</code></li>
<li><code>cd home</code></li>
<li><code>cd ~/data/..</code></li>
<li><code>cd</code></li>
<li><code>cd ..</code></li>
</ol>
</div>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<ol style="list-style-type: decimal">
<li>No: <code>.</code> stands for the current directory.</li>
<li>No: <code>/</code> stands for the root directory.</li>
<li>No: Amanda’s home directory is <code>/Users/amanda</code>.</li>
<li>No: this goes up two levels, i.e. ends in <code>/Users</code>.</li>
<li>Yes: <code>~</code> stands for the user’s home directory, in this
case <code>/Users/amanda</code>.</li>
<li>No: this would navigate into a directory <code>home</code> in the
current directory if it exists.</li>
<li>Yes: unnecessarily complicated, but correct.</li>
<li>Yes: shortcut to go back to the user’s home directory.</li>
<li>Yes: goes up one level.</li>
</ol>
</div>
</div>
</div>
</div>
<div id="relative-path-resolution" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="relative-path-resolution" class="callout-inner">
<h3 class="callout-title">Relative Path Resolution</h3>
<div class="callout-content">
<p>Using the filesystem diagram below, if <code>pwd</code> displays
<code>/Users/thing</code>, what will <code>ls -F ../backup</code>
display?</p>
<ol style="list-style-type: decimal">
<li><code>../backup: No such file or directory</code></li>
<li><code>2012-12-01 2013-01-08 2013-01-27</code></li>
<li><code>2012-12-01/ 2013-01-08/ 2013-01-27/</code></li>
<li><code>original/ pnas_final/ pnas_sub/</code></li>
</ol>
<figure><img src="fig/filesystem-challenge.svg" alt="File System for Challenge Questions" class="figure mx-auto d-block"><div class="figcaption">File System for Challenge Questions</div>
</figure>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3"> Show me the solution </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" aria-labelledby="headingSolution3" data-bs-parent="#accordionSolution3">
<div class="accordion-body">
<ol style="list-style-type: decimal">
<li>No: there <em>is</em> a directory <code>backup</code> in
<code>/Users</code>.</li>
<li>No: this is the content of <code>Users/thing/backup</code>, but with
<code>..</code> we asked for one level further up.</li>
<li>No: see previous explanation.</li>
<li>Yes: <code>../backup/</code> refers to
<code>/Users/backup/</code>.</li>
</ol>
</div>
</div>
</div>
</div>
<div id="ls-reading-comprehension" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="ls-reading-comprehension" class="callout-inner">
<h3 class="callout-title">
<code>ls</code> Reading Comprehension</h3>
<div class="callout-content">
<p>Assuming a directory structure as in the above Figure (File System
for Challenge Questions), if <code>pwd</code> displays
<code>/Users/backup</code>, and <code>-r</code> tells <code>ls</code> to
display things in reverse order, which command will display:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>pnas_sub/ pnas_final/ original/</code></pre>
</div>
<ol style="list-style-type: decimal">
<li><code>ls pwd</code></li>
<li><code>ls -r -F</code></li>
<li><code>ls -r -F /Users/backup</code></li>
<li>Either #2 or #3 above, but not #1.</li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution4" aria-expanded="false" aria-controls="collapseSolution4">
  <h4 class="accordion-header" id="headingSolution4"> Show me the solution </h4>
</button>
<div id="collapseSolution4" class="accordion-collapse collapse" aria-labelledby="headingSolution4" data-bs-parent="#accordionSolution4">
<div class="accordion-body">
<ol style="list-style-type: decimal">
<li>No: <code>pwd</code> is not the name of a directory.</li>
<li>Yes: <code>ls</code> without directory argument lists files and
directories in the current directory.</li>
<li>Yes: uses the absolute path explicitly.</li>
<li>Correct: see explanations above.</li>
</ol>
</div>
</div>
</div>
</div>
<div id="exploring-more-ls-arguments" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="exploring-more-ls-arguments" class="callout-inner">
<h3 class="callout-title">Exploring More <code>ls</code> Arguments</h3>
<div class="callout-content">
<p>What does the command <code>ls</code> do when used with the
<code>-l</code> and <code>-h</code> arguments? Some of its output is
about properties that we do not cover in this lesson (such as file
permissions and ownership), but the rest should be useful
nevertheless.</p>
</div>
</div>
</div>
<div id="accordionSolution5" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution5" aria-expanded="false" aria-controls="collapseSolution5">
  <h4 class="accordion-header" id="headingSolution5"> Show me the solution </h4>
</button>
<div id="collapseSolution5" class="accordion-collapse collapse" aria-labelledby="headingSolution5" data-bs-parent="#accordionSolution5">
<div class="accordion-body">
<p>The <code>-l</code> arguments makes <code>ls</code> use a
<strong>l</strong>ong listing format, showing not only the
file/directory names but also additional information such as the file
size and the time of its last modification. The <code>-h</code> argument
makes the file size “<strong>h</strong>uman readable”, i.e. display
something like <code>5.3K</code> instead of <code>5369</code>.</p>
</div>
</div>
</div>
</div>
<div id="listing-recursively-and-by-time" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="listing-recursively-and-by-time" class="callout-inner">
<h3 class="callout-title">Listing Recursively and By Time</h3>
<div class="callout-content">
<p>The command <code>ls -R</code> lists the contents of directories
recursively, i.e., lists their sub-directories, sub-sub-directories, and
so on in alphabetical order at each level. The command
<code>ls -t</code> lists things by time of last change, with most
recently changed files or directories first. In what order does
<code>ls -R -t</code> display things? Hint: <code>ls -l</code> uses a
long listing format to view timestamps.</p>
</div>
</div>
</div>
<div id="accordionSolution6" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution6" aria-expanded="false" aria-controls="collapseSolution6">
  <h4 class="accordion-header" id="headingSolution6"> Show me the solution </h4>
</button>
<div id="collapseSolution6" class="accordion-collapse collapse" aria-labelledby="headingSolution6" data-bs-parent="#accordionSolution6">
<div class="accordion-body">
<p>The directories are listed alphabetical at each level, the
files/directories in each directory are sorted by time of last
change.</p>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>Your current directory is referred to as the working directory.</li>
<li>To change directories, use <code>cd</code>.</li>
<li>To view files, use <code>ls</code>.</li>
<li>You can view help for a command with <code>man command</code> or
<code>command --help</code>.</li>
<li>Hit <kbd>Tab</kbd> to autocomplete whatever you’re currently
typing.</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.

use like [gitbash][gitbash]
 -->
</section></section><section id="aio-14-files"><p>Content from <a href="14-files.html">Working with files</a></p>
<hr>
<p>Last updated on 2024-11-13 |

        <a href="https://github.com/EPCCed/2024-10-30-hpc-shell-edinburgh/edit/main/episodes/14-files.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How do I create/edit text files?</li>
<li>How do I move/copy/delete files?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Learn to use the <code>nano</code> text editor.</li>
<li>Understand how to move, create, and delete files.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>Now that we know how to move around and look at things, let’s learn
how to read, write, and handle files! We’ll start by moving back to our
home directory and creating a scratch directory:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="ex">$</span> cd ~</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="ex">$</span> mkdir hpc-test</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="ex">$</span> cd hpc-test</span></code></pre>
</div>
<section><h2 class="section-heading" id="creating-and-editing-text-files">Creating and Editing Text Files<a class="anchor" aria-label="anchor" href="#creating-and-editing-text-files"></a>
</h2>
<hr class="half-width">
<p>When working on an HPC system, we will frequently need to create or
edit text files. Text is one of the simplest computer file formats,
defined as a simple sequence of text lines.</p>
<p>What if we want to make a file? There are a few ways of doing this,
the easiest of which is simply using a text editor. For this lesson, we
are going to us <code>nano</code>, since it’s more intuitive than many
other terminal text editors.</p>
<p>To create or edit a file, type <code>nano &lt;filename&gt;</code>, on
the terminal, where <code>&lt;filename&gt;</code> is the name of the
file. If the file does not already exist, it will be created. Let’s make
a new file now, type whatever you want in it, and save it.</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="ex">$</span> nano draft.txt</span></code></pre>
</div>
<figure><img src="fig/nano-screenshot.png" alt="Nano in action" class="figure mx-auto d-block"><div class="figcaption">Nano in action</div>
</figure><p>Nano defines a number of <em>shortcut keys</em> (prefixed by the
<kbd>Control</kbd> or <kbd>Ctrl</kbd> key) to perform actions such as
saving the file or exiting the editor. Here are the shortcut keys for a
few common actions:</p>
<ul>
<li><p><kbd>Ctrl</kbd>+<kbd>O</kbd> — save the file (into a current name
or a new name).</p></li>
<li><p><kbd>Ctrl</kbd>+<kbd>X</kbd> — exit the editor. If you have not
saved your file upon exiting, <code>nano</code> will ask you if you want
to save.</p></li>
<li><p><kbd>Ctrl</kbd>+<kbd>K</kbd> — cut (“kill”) a text line. This
command deletes a line and saves it on a clipboard. If repeated multiple
times without any interruption (key typing or cursor movement), it will
cut a chunk of text lines.</p></li>
<li><p><kbd>Ctrl</kbd>+<kbd>U</kbd> — paste the cut text line (or
lines). This command can be repeated to paste the same text
elsewhere.</p></li>
</ul>
<div id="using-vim-as-a-text-editor" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="using-vim-as-a-text-editor" class="callout-inner">
<h3 class="callout-title">Using <code>vim</code> as a text editor</h3>
<div class="callout-content">
<p>From time to time, you may encounter the <code>vim</code> text
editor. Although <code>vim</code> isn’t the easiest or most
user-friendly of text editors, you’ll be able to find it on any system
and it has many more features than <code>nano</code>.</p>
<p><code>vim</code> has several modes, a “command” mode (for doing big
operations, like saving and quitting) and an “insert” mode. You can
switch to insert mode with the <kbd>i</kbd> key, and command mode with
<kbd>Esc</kbd>.</p>
<p>In insert mode, you can type more or less normally. In command mode
there are a few commands you should be aware of:</p>
<ul>
<li>
<code>:q!</code> — quit, without saving</li>
<li>
<code>:wq</code> — save and quit</li>
<li>
<code>dd</code> — cut/delete a line</li>
<li>
<code>y</code> — paste a line</li>
</ul>
</div>
</div>
</div>
<p>Do a quick check to confirm our file was created.</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="ex">$</span> ls</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">draft.txt</span></span></code></pre>
</div>
</section><section><h2 class="section-heading" id="reading-files">Reading Files<a class="anchor" aria-label="anchor" href="#reading-files"></a>
</h2>
<hr class="half-width">
<p>Let’s read the file we just created now. There are a few different
ways of doing this, one of which is reading the entire file with
<code>cat</code>.</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="ex">$</span> cat draft.txt</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>It's not "publish or perish" any more,
it's "share and thrive".</code></pre>
</div>
<p>By default, <code>cat</code> prints out the content of the given
file. Although <code>cat</code> may not seem like an intuitive command
with which to read files, it stands for “concatenate”. Giving it
multiple file names will print out the contents of the input files in
the order specified in the <code>cat</code>’s invocation. For
example,</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="ex">$</span> cat draft.txt draft.txt</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>It's not "publish or perish" any more,
it's "share and thrive".
It's not "publish or perish" any more,
it's "share and thrive".</code></pre>
</div>
<div id="reading-multiple-text-files" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="reading-multiple-text-files" class="callout-inner">
<h3 class="callout-title">Reading Multiple Text Files</h3>
<div class="callout-content">
<p>Create two more files using <code>nano</code>, giving them different
names such as <code>chap1.txt</code> and <code>chap2.txt</code>. Then
use a single <code>cat</code> command to read and print the contents of
<code>draft.txt</code>, <code>chap1.txt</code>, and
<code>chap2.txt</code>.</p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="creating-directory">Creating Directory<a class="anchor" aria-label="anchor" href="#creating-directory"></a>
</h2>
<hr class="half-width">
<p>We’ve successfully created a file. What about a directory? We’ve
actually done this before, using <code>mkdir</code>.</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="ex">$</span> mkdir files</span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a><span class="ex">$</span> ls</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>draft.txt  files</code></pre>
</div>
</section><section><h2 class="section-heading" id="moving-renaming-copying-files">Moving, Renaming, Copying Files<a class="anchor" aria-label="anchor" href="#moving-renaming-copying-files"></a>
</h2>
<hr class="half-width">
<p><strong>Moving</strong> — We will move <code>draft.txt</code> to the
<code>files</code> directory with <code>mv</code> (“move”) command. The
same syntax works for both files and directories:
<code>mv &lt;file/directory&gt; &lt;new-location&gt;</code></p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="ex">$</span> mv draft.txt files</span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a><span class="ex">$</span> cd files</span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a><span class="ex">$</span> ls</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">draft.txt</span></span></code></pre>
</div>
<p><strong>Renaming</strong> — <code>draft.txt</code> isn’t a very
descriptive name. How do we go about changing it? It turns out that
<code>mv</code> is also used to rename files and directories. Although
this may not seem intuitive at first, think of it as <em>moving</em> a
file to be stored under a different name. The syntax is quite similar to
moving files: <code>mv oldName newName</code>.</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="ex">$</span> mv draft.txt newname.testfile</span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a><span class="ex">$</span> ls</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">newname.testfile</span></span></code></pre>
</div>
</section><section><h2 class="section-heading" id="removing-files">Removing files<a class="anchor" aria-label="anchor" href="#removing-files"></a>
</h2>
<hr class="half-width">
<p>We’ve begun to clutter up our workspace with all of the directories
and files we’ve been making. Let’s learn how to get rid of them. One
important note before we start… <strong>when you delete a file on UNIX
systems, they are gone <em>forever</em></strong>. There is no “recycle
bin” or “trash”. Once a file is deleted, it is gone, never to return. So
be <em>very</em> careful when deleting files.</p>
<p>Files are deleted with <code>rm file [moreFiles]</code>. To delete
the <code>newname.testfile</code> in our current directory:</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="ex">$</span> ls</span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a><span class="ex">$</span> rm newname.testfile</span>
<span id="cb15-3"><a href="#cb15-3" tabindex="-1"></a><span class="ex">$</span> ls</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>files Documents newname.testfile
files Documents</code></pre>
</div>
<p>That was simple enough. Directories are deleted in a similar manner
using <code>rm -r</code> (the <code>-r</code> option stands for
‘recursive’).</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="ex">$</span> ls</span>
<span id="cb17-2"><a href="#cb17-2" tabindex="-1"></a><span class="ex">$</span> rm <span class="at">-r</span> Documents</span>
<span id="cb17-3"><a href="#cb17-3" tabindex="-1"></a><span class="ex">$</span> rm <span class="at">-r</span> files</span>
<span id="cb17-4"><a href="#cb17-4" tabindex="-1"></a><span class="ex">$</span> ls</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>files Documents
rmdir: failed to remove `files/': Directory not empty
files</code></pre>
</div>
<p>What happened? As it turns out, <code>rmdir</code> is unable to
remove directories that have stuff in them. To delete a directory and
everything inside it, we will use a special variant of <code>rm</code>,
<code>rm -rf directory</code>. This is probably the scariest command on
UNIX- it will force delete a directory and all of its contents without
prompting. <strong>ALWAYS</strong> double check your typing before using
it… if you leave out the arguments, it will attempt to delete everything
on your file system that you have permission to delete. So when deleting
directories be very, very careful.</p>
<div id="what-happens-when-you-use-rm--rf-accidentally" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="what-happens-when-you-use-rm--rf-accidentally" class="callout-inner">
<h3 class="callout-title">What happens when you use <code>rm -rf</code>
accidentally</h3>
<div class="callout-content">
<p>Steam is a major online sales platform for PC video games with over
125 million users. Despite this, it hasn’t always had the most stable or
error-free code.</p>
<p>In January 2015, user kevyin on GitHub <a href="https://github.com/ValveSoftware/steam-for-linux/issues/3671" class="external-link">reported
that Steam’s Linux client had deleted every file on his computer</a>. It
turned out that one of the Steam programmers had added the following
line: <code>rm -rf "$STEAMROOT/"*</code>. Due to the way that Steam was
set up, the variable <code>$STEAMROOT</code> was never initialized,
meaning the statement evaluated to <code>rm -rf /*</code>. This coding
error in the Linux client meant that Steam deleted every single file on
a computer when run in certain scenarios (including connected external
hard drives). Moral of the story: <strong>be very careful</strong> when
using <code>rm -rf</code>!</p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="looking-at-files">Looking at files<a class="anchor" aria-label="anchor" href="#looking-at-files"></a>
</h2>
<hr class="half-width">
<p>Sometimes it’s not practical to read an entire file with
<code>cat</code>- the file might be way too large, take a long time to
open, or maybe we want to only look at a certain part of the file. As an
example, we are going to look at a large and complex file type used in
bioinformatics- a <code>.gtf</code> file. The GTF2 format is commonly
used to describe the location of genetic features in a genome.</p>
<p>Let’s grab and unpack a set of demo files for use later. To do this,
we’ll use <a href="https://www.gnu.org/software/wget/" class="external-link"><code>wget</code></a>
(<code>wget &lt;link&gt;</code> downloads a file from a link).</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="ex">$</span> wget https://epcced.github.io/2024-10-30-hpc-shell-edinburgh/files/bash-lesson.tar.gz</span></code></pre>
</div>
<div id="problems-with-wget" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="problems-with-wget" class="callout-inner">
<h3 class="callout-title">Problems with <code>wget</code>?</h3>
<div class="callout-content">
<p><code>wget</code> is a stand-alone application for downloading things
over HTTP/HTTPS and FTP/FTPS connections, and it does the job admirably
— when it is installed.</p>
<p>Some operating systems instead come with <a href="https://curl.haxx.se/" class="external-link">cURL</a>, which is the command-line
interface to <code>libcurl</code>, a powerful library for programming
interactions with remote resources over a wide variety of network
protocols. If you have <code>curl</code> but not <code>wget</code>, then
try this command instead:</p>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a><span class="ex">$</span> curl <span class="at">-O</span> https://epcced.github.io/2024-10-30-hpc-shell-edinburgh/files/bash-lesson.tar.gz</span></code></pre>
</div>
<p>For very large downloads, you might consider using <a href="https://aria2.github.io/" class="external-link">Aria2</a>, which has support for
downloading the same file from multiple mirrors. You have to install it
separately, but if you have it, try this to get it faster than your
neighbors:</p>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a><span class="ex">$</span> aria2c https://epcced.github.io/2024-10-30-hpc-shell-edinburgh/files/bash-lesson.tar.gz</span></code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1">
  Install cURL
  </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<ul>
<li><p>macOS: <code>curl</code> is pre-installed on macOS. If you must
have the latest version you can <code>brew install</code> it, but only
do so if the stock version has failed you.</p></li>
<li><p>Windows: <code>curl</code> comes preinstalled for the Windows 10
command line. For earlier Windows systems, you can download the
executable <a href="https://curl.haxx.se/windows/" class="external-link">directly</a>; run it
in place. <code>curl</code> comes preinstalled in <a href="https://gitforwindows.org/" class="external-link">Git for Windows</a> and <a href="https://docs.microsoft.com/en-us/windows/wsl/install-win10" class="external-link">Windows
Subsystem for Linux</a>. On <a href="https://www.cygwin.com/" class="external-link">Cygwin</a>, run the setup program again
and select the <code>curl</code> package to install it.</p></li>
<li>
<p>Linux: <code>curl</code> is packaged for every major
distribution. You can install it through the usual means.</p>
<ul>
<li>Debian, Ubuntu, Mint: <code>sudo apt install curl</code>
</li>
<li>CentOS, Red Hat: <code>sudo yum install curl</code> or
<code>zypper install curl</code>
</li>
<li>Fedora: <code>sudo dnf install curl</code>
</li>
</ul>
</li>
</ul>
</div>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2">
  Install Aria2
  </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" data-bs-parent="#accordionSolution2" aria-labelledby="headingSolution2">
<div class="accordion-body">
<ul>
<li><p>macOS: <code>aria2c</code> is available through a homebrew.
<code>brew install aria2</code>.</p></li>
<li><p>Windows: download the latest <a href="https://github.com/aria2/aria2/releases" class="external-link">release</a> and run
<code>aria2c</code> in place. If you’re using the <a href="https://docs.microsoft.com/en-us/windows/wsl/install-win10" class="external-link">Windows
Subsystem for Linux</a>,</p></li>
<li>
<p>Linux: every major distribution has an <code>aria2</code>
package. Install it by the usual means.</p>
<ul>
<li>Debian, Ubuntu, Mint: <code>sudo apt install aria2</code>
</li>
<li>CentOS, Red Hat: <code>sudo yum install aria2</code> or
<code>zypper install aria2</code>
</li>
<li>Fedora: <code>sudo dnf install aria2</code>
</li>
</ul>
</li>
</ul>
</div>
</div>
</div>
</div>
<p>You’ll commonly encounter <code>.tar.gz</code> archives while working
in UNIX. To extract the files from a <code>.tar.gz</code> file, we run
the command <code>tar -xvf filename.tar.gz</code>:</p>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a><span class="ex">$</span> tar <span class="at">-xvf</span> bash-lesson.tar.gz</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">dmel</span><span class="op">-</span><span class="va">all</span><span class="op">-</span><span class="va">r6.19.gtf</span></span>
<span><span class="va">dmel_unique_protein_isoforms_fb_2016_01.tsv</span></span>
<span><span class="va">gene_association.fb</span></span>
<span><span class="va">SRR307023_1.fastq</span></span>
<span><span class="va">SRR307023_2.fastq</span></span>
<span><span class="va">SRR307024_1.fastq</span></span>
<span><span class="va">SRR307024_2.fastq</span></span>
<span><span class="va">SRR307025_1.fastq</span></span>
<span><span class="va">SRR307025_2.fastq</span></span>
<span><span class="va">SRR307026_1.fastq</span></span>
<span><span class="va">SRR307026_2.fastq</span></span>
<span><span class="va">SRR307027_1.fastq</span></span>
<span><span class="va">SRR307027_2.fastq</span></span>
<span><span class="va">SRR307028_1.fastq</span></span>
<span><span class="va">SRR307028_2.fastq</span></span>
<span><span class="va">SRR307029_1.fastq</span></span>
<span><span class="va">SRR307029_2.fastq</span></span>
<span><span class="va">SRR307030_1.fastq</span></span>
<span><span class="va">SRR307030_2.fastq</span></span></code></pre>
</div>
<div id="unzipping-files" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="unzipping-files" class="callout-inner">
<h3 class="callout-title">Unzipping files</h3>
<div class="callout-content">
<p>We just unzipped a .tar.gz file for this example. What if we run into
other file formats that we need to unzip? Just use the handy reference
below:</p>
<ul>
<li>
<code>gunzip</code> extracts the contents of .gz files</li>
<li>
<code>unzip</code> extracts the contents of .zip files</li>
<li>
<code>tar -xvf</code> extracts the contents of .tar.gz and .tar.bz2
files</li>
</ul>
</div>
</div>
</div>
<p>That is a lot of files! One of these files,
<code>dmel-all-r6.19.gtf</code> is extremely large, and contains every
annotated feature in the <em>Drosophila melanogaster</em> genome. It’s a
huge file- what happens if we run <code>cat</code> on it? (Press
<kbd>Ctrl + c</kbd> to stop it).</p>
<p>So, <code>cat</code> is a really bad option when reading big files…
it scrolls through the entire file far too quickly! What are the
alternatives? Try all of these out and see which ones you like best!</p>
<ul>
<li>
<code>head &lt;file&gt;</code>: Print the top 10 lines in a file to
the console. You can control the number of lines you see with the
<code>-n &lt;numberOfLines&gt;</code> flag.</li>
<li>
<code>tail &lt;file&gt;</code>: Same as <code>head</code>, but
prints the last 10 lines in a file to the console.</li>
<li>
<code>less &lt;file&gt;</code>: Opens a file and display as much as
possible on-screen. You can scroll with <kbd>Enter</kbd> or the arrow
keys on your keyboard. Press <kbd>q</kbd> to close the viewer.</li>
</ul>
<div id="discussion2" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Challenge</h3>
<div class="callout-content">
<p>Out of <code>cat</code>, <code>head</code>, <code>tail</code>, and
<code>less</code>, which method of reading files is your favourite?
Why?</p>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>Use <code>nano</code> to create or edit text files from a
terminal.</li>
<li>Use <code>cat file1 [file2 ...]</code> to print the contents of one
or more files to the terminal.</li>
<li>Use <code>mv old dir</code> to move a file or directory
<code>old</code> to another directory <code>dir</code>.</li>
<li>Use <code>mv old new</code> to rename a file or directory
<code>old</code> to a <code>new</code> name.</li>
<li>Use <code>cp old new</code> to copy a file under a new name or
location.</li>
<li>Use <code>cp old dir</code> copies a file <code>old</code> into a
directory <code>dir</code>.</li>
<li>Use <code>rm old</code> to delete (remove) a file.</li>
<li>File extensions are entirely arbitrary on UNIX systems.</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.

use like [gitbash][gitbash]
 -->
</section></section><section id="aio-15-wildcards-pipes"><p>Content from <a href="15-wildcards-pipes.html">Wildcards and pipes</a></p>
<hr>
<p>Last updated on 2024-11-13 |

        <a href="https://github.com/EPCCed/2024-10-30-hpc-shell-edinburgh/edit/main/episodes/15-wildcards-pipes.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How can I run a command on multiple files at once?</li>
<li>Is there an easy way of saving a command’s output?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Redirect a command’s output to a file.</li>
<li>Process a file instead of keyboard input using redirection.</li>
<li>Construct command pipelines with two or more stages.</li>
<li>Explain what usually happens if a program or pipeline isn’t given
any input to process.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div id="required-files" class="callout prereq">
<div class="callout-square">
<i class="callout-icon" data-feather="check"></i>
</div>
<div id="required-files" class="callout-inner">
<h3 class="callout-title">Required files</h3>
<div class="callout-content">
<p>If you didn’t get them in the last lesson, make sure to download the
example files used in the next few sections:</p>
<p><strong>Using wget</strong>:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">wget</span> https://epcced.github.io/2024-10-30-hpc-shell-edinburgh/files/bash-lesson.tar.gz</span></code></pre>
</div>
<p><strong>Using a web browser</strong>: <a href="https://epcced.github.io/2024-10-30-hpc-shell-edinburgh/files/bash-lesson.tar.gz" class="external-link uri">https://epcced.github.io/2024-10-30-hpc-shell-edinburgh/files/bash-lesson.tar.gz</a></p>
</div>
</div>
</div>
<p>Now that we know some of the basic UNIX commands, we are going to
explore some more advanced features. The first of these features is the
wildcard <code>*</code>. In our examples before, we’ve done things to
files one at a time and otherwise had to specify things explicitly. The
<code>*</code> character lets us speed things up and do things across
multiple files.</p>
<p>Ever wanted to move, delete, or just do “something” to all files of a
certain type in a directory? <code>*</code> lets you do that, by taking
the place of one or more characters in a piece of text. So
<code>*.txt</code> would be equivalent to all <code>.txt</code> files in
a directory for instance. <code>*</code> by itself means all files.
Let’s use our example data to see what I mean.</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="ex">$</span> tar xvf bash-lesson.tar.gz</span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a><span class="ex">$</span> ls</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>bash-lesson.tar.gz                           SRR307026_1.fastq
dmel-all-r6.19.gtf                           SRR307026_2.fastq
dmel_unique_protein_isoforms_fb_2016_01.tsv  SRR307027_1.fastq
gene_association.fb                          SRR307027_2.fastq
SRR307023_1.fastq                            SRR307028_1.fastq
SRR307023_2.fastq                            SRR307028_2.fastq
SRR307024_1.fastq                            SRR307029_1.fastq
SRR307024_2.fastq                            SRR307029_2.fastq
SRR307025_1.fastq                            SRR307030_1.fastq
SRR307025_2.fastq                            SRR307030_2.fastq</code></pre>
</div>
<section><h2 class="section-heading" id="word-counts-and-wildcards-globbing">Word counts and wildcards (globbing)<a class="anchor" aria-label="anchor" href="#word-counts-and-wildcards-globbing"></a>
</h2>
<hr class="half-width">
<p>Now we have a whole bunch of example files in our directory. For this
example we are going to learn a new command that tells us how long a
file is: <code>wc</code>. <code>wc -l file</code> tells us the length of
a file in lines.</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="ex">$</span> wc <span class="at">-l</span> dmel-all-r6.19.gtf</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>542048 dmel-all-r6.19.gtf</code></pre>
</div>
<p>Interesting, there are over 540000 lines in our
<code>dmel-all-r6.19.gtf</code> file. What if we wanted to run
<code>wc -l</code> on every <code>.fastq</code> file? This is where
<code>*</code> comes in really handy! <code>*.fastq</code> would match
every file ending in <code>.fastq</code>.</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="ex">$</span> wc <span class="at">-l</span> <span class="pp">*</span>.fastq</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>20000 SRR307023_1.fastq
20000 SRR307023_2.fastq
20000 SRR307024_1.fastq
20000 SRR307024_2.fastq
20000 SRR307025_1.fastq
20000 SRR307025_2.fastq
20000 SRR307026_1.fastq
20000 SRR307026_2.fastq
20000 SRR307027_1.fastq
20000 SRR307027_2.fastq
20000 SRR307028_1.fastq
20000 SRR307028_2.fastq
20000 SRR307029_1.fastq
20000 SRR307029_2.fastq
20000 SRR307030_1.fastq
20000 SRR307030_2.fastq
320000 total</code></pre>
</div>
<p>That was easy. What if we wanted to do the same command, except on
every file in the directory? A nice trick to keep in mind is that
<code>*</code> by itself matches <em>every</em> file.</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="ex">$</span> wc <span class="at">-l</span> <span class="pp">*</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>    53037 bash-lesson.tar.gz
   542048 dmel-all-r6.19.gtf
    22129 dmel_unique_protein_isoforms_fb_2016_01.tsv
   106290 gene_association.fb
    20000 SRR307023_1.fastq
    20000 SRR307023_2.fastq
    20000 SRR307024_1.fastq
    20000 SRR307024_2.fastq
    20000 SRR307025_1.fastq
    20000 SRR307025_2.fastq
    20000 SRR307026_1.fastq
    20000 SRR307026_2.fastq
    20000 SRR307027_1.fastq
    20000 SRR307027_2.fastq
    20000 SRR307028_1.fastq
    20000 SRR307028_2.fastq
    20000 SRR307029_1.fastq
    20000 SRR307029_2.fastq
    20000 SRR307030_1.fastq
    20000 SRR307030_2.fastq
  1043504 total</code></pre>
</div>
<div id="multiple-wildcards" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="multiple-wildcards" class="callout-inner">
<h3 class="callout-title">Multiple wildcards</h3>
<div class="callout-content">
<p>You can even use multiple <code>*</code>s at a time. How would you
run <code>wc -l</code> on every file with “fb” in it?</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="ex">$</span> wc <span class="at">-l</span> <span class="pp">*</span>fb<span class="pp">*</span></span></code></pre>
</div>
<p>i.e. <em>anything or nothing</em> then <code>fb</code> then
<em>anything or nothing</em></p>
</div>
</div>
</div>
</div>
<div id="using-other-commands" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="using-other-commands" class="callout-inner">
<h3 class="callout-title">Using other commands</h3>
<div class="callout-content">
<p>Now let’s try cleaning up our working directory a bit. Create a
folder called “fastq” and move all of our .fastq files there in one
<code>mv</code> command.</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" data-bs-parent="#accordionSolution2" aria-labelledby="headingSolution2">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="fu">mkdir</span> fastq</span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a><span class="fu">mv</span> <span class="pp">*</span>.fastq fastq/</span></code></pre>
</div>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="redirecting-output">Redirecting output<a class="anchor" aria-label="anchor" href="#redirecting-output"></a>
</h2>
<hr class="half-width">
<p>Each of the commands we’ve used so far does only a very small amount
of work. However, we can chain these small UNIX commands together to
perform otherwise complicated actions!</p>
<p>For our first foray into <em>piping</em>, or redirecting output, we
are going to use the <code>&gt;</code> operator to write output to a
file. When using <code>&gt;</code>, whatever is on the left of the
<code>&gt;</code> is written to the filename you specify on the right of
the arrow. The actual syntax looks like
<code>command &gt; filename</code>.</p>
<p>Let’s try several basic usages of <code>&gt;</code>.
<code>echo</code> simply prints back, or echoes whatever you type after
it.</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="ex">$</span> echo <span class="st">"this is a test"</span></span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a><span class="ex">$</span> echo <span class="st">"this is a test"</span> <span class="op">&gt;</span> test.txt</span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a><span class="ex">$</span> ls</span>
<span id="cb12-4"><a href="#cb12-4" tabindex="-1"></a><span class="ex">$</span> cat test.txt</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>this is a test

bash-lesson.tar.gz                           fastq
dmel-all-r6.19.gtf                           gene_association.fb
dmel_unique_protein_isoforms_fb_2016_01.tsv  test.txt

this is a test</code></pre>
</div>
<p>Awesome, let’s try that with a more complicated command, like
<code>wc -l</code>.</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="ex">$</span> wc <span class="at">-l</span> <span class="pp">*</span> <span class="op">&gt;</span> word_counts.txt</span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a><span class="ex">$</span> cat word_counts.txt</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>wc: fastq: Is a directory

    53037 bash-lesson.tar.gz
   542048 dmel-all-r6.19.gtf
    22129 dmel_unique_protein_isoforms_fb_2016_01.tsv
        0 fastq
   106290 gene_association.fb
        1 test.txt
   723505 total</code></pre>
</div>
<p>Notice how we still got some output to the console even though we
“piped” the output to a file? Our expected output still went to the
file, but how did the error message get skipped and not go to the
file?</p>
<p>This phenomena is an artefact of how UNIX systems are built. There
are 3 input/output streams for every UNIX program you will run:
<code>stdin</code>, <code>stdout</code>, and <code>stderr</code>.</p>
<p>Let’s dissect these three streams of input/output in the command we
just ran: <code>wc -l * &gt; word_counts.txt</code></p>
<ul>
<li>
<code>stdin</code> is the input to a program. In the command we just
ran, <code>stdin</code> is represented by <code>*</code>, which is
simply every filename in our current directory.</li>
<li>
<code>stdout</code> contains the actual, expected output. In this
case, <code>&gt;</code> redirected <code>stdout</code> to the file
<code>word_counts.txt</code>.</li>
<li>
<code>stderr</code> typically contains error messages and other
information that doesn’t quite fit into the category of “output”. If we
insist on redirecting both <code>stdout</code> and <code>stderr</code>
to the same file we would use <code>&amp;&gt;</code> instead of
<code>&gt;</code>. (We can redirect just <code>stderr</code> using
<code>2&gt;</code>.)</li>
</ul>
<p>Knowing what we know now, let’s try re-running the command, and send
all of the output (including the error message) to the same
<code>word_counts.txt</code> files as before.</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="ex">$</span> wc <span class="at">-l</span> <span class="pp">*</span> <span class="op">&amp;&gt;</span> word_counts.txt</span></code></pre>
</div>
<p>Notice how there was no output to the console that time. Let’s check
that the error message went to the file like we specified.</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="ex">$</span> cat word_counts.txt</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>    53037 bash-lesson.tar.gz
   542048 dmel-all-r6.19.gtf
    22129 dmel_unique_protein_isoforms_fb_2016_01.tsv
wc: fastq: Is a directory
        0 fastq
   106290 gene_association.fb
        1 test.txt
        7 word_counts.txt
   723512 total</code></pre>
</div>
<p>Success! The <code>wc: fastq: Is a directory</code> error message was
written to the file. Also, note how the file was silently overwritten by
directing output to the same place as before. Sometimes this is not the
behaviour we want. How do we append (add) to a file instead of
overwriting it?</p>
<p>Appending to a file is done the same was as redirecting output.
However, instead of <code>&gt;</code>, we will use
<code>&gt;&gt;</code>.</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="ex">$</span> echo <span class="st">"We want to add this sentence to the end of our file"</span> <span class="op">&gt;&gt;</span> word_counts.txt</span>
<span id="cb19-2"><a href="#cb19-2" tabindex="-1"></a><span class="ex">$</span> cat word_counts.txt</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>    53037 bash-lesson.tar.gz
   542048 dmel-all-r6.19.gtf
    22129 dmel_unique_protein_isoforms_fb_2016_01.tsv
wc: fastq: Is a directory
        0 fastq
   106290 gene_association.fb
        1 test.txt
        7 word_counts.txt
   723512 total
We want to add this sentence to the end of our file</code></pre>
</div>
</section><section><h2 class="section-heading" id="chaining-commands-together">Chaining commands together<a class="anchor" aria-label="anchor" href="#chaining-commands-together"></a>
</h2>
<hr class="half-width">
<p>We now know how to redirect <code>stdout</code> and
<code>stderr</code> to files. We can actually take this a step further
and redirect output (<code>stdout</code>) from one command to serve as
the input (<code>stdin</code>) for the next. To do this, we use the
<code>|</code> (pipe) operator.</p>
<p><code>grep</code> is an extremely useful command. It finds things for
us within files. Basic usage (there are a lot of options for more clever
things, see the <code>man</code> page) uses the syntax
<code>grep whatToFind fileToSearch</code>. Let’s use <code>grep</code>
to find all of the entries pertaining to the <code>Act5C</code> gene in
<em>Drosophila melanogaster</em>.</p>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a><span class="ex">$</span> grep Act5C dmel-all-r6.19.gtf</span></code></pre>
</div>
<p>The output is nearly unintelligible since there is so much of it.
Let’s send the output of that <code>grep</code> command to
<code>head</code> so we can just take a peek at the first line. The
<code>|</code> operator lets us send output from one command to the
next:</p>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a><span class="ex">$</span> grep Act5C dmel-all-r6.19.gtf <span class="kw">|</span> <span class="fu">head</span> <span class="at">-n</span> 1</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>X	FlyBase	gene	5900861	5905399	.	+	.	gene_id "FBgn0000042"; gene_symbol "Act5C";</code></pre>
</div>
<p>Nice work, we sent the output of <code>grep</code> to
<code>head</code>. Let’s try counting the number of entries for Act5C
with <code>wc -l</code>. We can do the same trick to send
<code>grep</code>’s output to <code>wc -l</code>:</p>
<div class="codewrapper sourceCode" id="cb24">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb24-1"><a href="#cb24-1" tabindex="-1"></a><span class="ex">$</span> grep Act5C dmel-all-r6.19.gtf <span class="kw">|</span> <span class="fu">wc</span> <span class="at">-l</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="fl">46</span></span></code></pre>
</div>
<p>Note that this is just the same as redirecting output to a file, then
reading the number of lines from that file.</p>
<div id="writing-commands-using-pipes" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="writing-commands-using-pipes" class="callout-inner">
<h3 class="callout-title">Writing commands using pipes</h3>
<div class="callout-content">
<p>How many files are there in the “fastq” directory we made earlier?
(Use the shell to do this.)</p>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3"> Show me the solution </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" data-bs-parent="#accordionSolution3" aria-labelledby="headingSolution3">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb26">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb26-1"><a href="#cb26-1" tabindex="-1"></a><span class="fu">ls</span> fastq/ <span class="kw">|</span> <span class="fu">wc</span> <span class="at">-l</span></span></code></pre>
</div>
<p>Output of <code>ls</code> is one line per item, when chaining
commands together like this, so counting lines gives the number of
files.</p>
</div>
</div>
</div>
</div>
<div id="reading-from-compressed-files" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="reading-from-compressed-files" class="callout-inner">
<h3 class="callout-title">Reading from compressed files</h3>
<div class="callout-content">
<p>Let’s compress one of our files using gzip.</p>
<div class="codewrapper sourceCode" id="cb27">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb27-1"><a href="#cb27-1" tabindex="-1"></a><span class="ex">$</span> gzip gene_association.fb</span></code></pre>
</div>
<p><code>zcat</code> acts like <code>cat</code>, except that it can read
information from <code>.gz</code> (compressed) files. Using
<code>zcat</code>, can you write a command to take a look at the top few
lines of the <code>gene_association.fb.gz</code> file (without
decompressing the file itself)?</p>
</div>
</div>
</div>
<div id="accordionSolution4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution4" aria-expanded="false" aria-controls="collapseSolution4">
  <h4 class="accordion-header" id="headingSolution4"> Show me the solution </h4>
</button>
<div id="collapseSolution4" class="accordion-collapse collapse" data-bs-parent="#accordionSolution4" aria-labelledby="headingSolution4">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb28">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb28-1"><a href="#cb28-1" tabindex="-1"></a><span class="fu">zcat</span> gene_association.fb.gz <span class="kw">|</span> <span class="fu">head</span></span></code></pre>
</div>
<p>The <code>head</code> command without any options shows the first 10
lines of a file.</p>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>The <code>*</code> wildcard is used as a placeholder to match any
text that follows a pattern.</li>
<li>Redirect a command’s output to a file with <code>&gt;</code>.</li>
<li>Commands can be chained with <code>|</code>
</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.

use like [gitbash][gitbash]
 -->
</section></section><section id="aio-16-scripts"><p>Content from <a href="16-scripts.html">Scripts, variables, and loops</a></p>
<hr>
<p>Last updated on 2024-11-13 |

        <a href="https://github.com/EPCCed/2024-10-30-hpc-shell-edinburgh/edit/main/episodes/16-scripts.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How do I turn a set of commands into a program?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Write a shell script</li>
<li>Understand and manipulate UNIX permissions</li>
<li>Understand shell variables and how to use them</li>
<li>Write a simple “for” loop.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>We now know a lot of UNIX commands! Wouldn’t it be great if we could
save certain commands so that we could run them later or not have to
type them out again? As it turns out, this is straightforward to do. A
“shell script” is essentially a text file containing a list of UNIX
commands to be executed in a sequential manner. These shell scripts can
be run whenever we want, and are a great way to automate our work.</p>
<section><h2 class="section-heading" id="writing-a-script">Writing a Script<a class="anchor" aria-label="anchor" href="#writing-a-script"></a>
</h2>
<hr class="half-width">
<p>So how do we write a shell script, exactly? It turns out we can do
this with a text editor. Start editing a file called “demo.sh” (to
recap, we can do this with <code>nano demo.sh</code>). The “.sh” is the
standard file extension for shell scripts that most people use (you may
also see “.bash” used).</p>
<p>Our shell script will have two parts:</p>
<ul>
<li>On the very first line, add <code>#!/bin/bash</code>. The
<code>#!</code> (pronounced “hash-bang”) tells our computer what program
to run our script with. In this case, we are telling it to run our
script with our command-line shell (what we’ve been doing everything in
so far). If we wanted our script to be run with something else, like
Perl, we could add <code>#!/usr/bin/perl</code>
</li>
<li>Now, anywhere below the first line, add
<code>echo "Our script worked!"</code>. When our script runs,
<code>echo</code> will happily print out
<code>Our script worked!</code>.</li>
</ul>
<p>Our file should now look like this:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="co">#!/bin/bash</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="bu">echo</span> <span class="st">"Our script worked!"</span></span></code></pre>
</div>
<p>Ready to run our program? Let’s try running it:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="ex">$</span> demo.sh </span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>bash: demo.sh: command not found...</code></pre>
</div>
<p>Strangely enough, Bash can’t find our script. As it turns out, Bash
will only look in certain directories for scripts to run. To run
anything else, we need to tell Bash exactly where to look. To run a
script that we wrote ourselves, we need to specify the full path to the
file, followed by the filename. We could do this one of two ways: either
with our absolute path
<code>/home/ta180/ta180/yourUserName/demo.sh</code>, or with the
relative path <code>./demo.sh</code>.</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="ex">$</span> ./demo.sh</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>bash: ./demo.sh: Permission denied</code></pre>
</div>
<p>There’s one last thing we need to do. Before a file can be run, it
needs “permission” to run. Let’s look at our file’s permissions with
<code>ls -l</code>:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="ex">$</span> ls <span class="at">-l</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>-rw-rw-r-- 1 yourUsername tc001 12534006 Jan 16 18:50 bash-lesson.tar.gz
-rw-rw-r-- 1 yourUsername tc001       40 Jan 16 19:41 demo.sh
-rw-rw-r-- 1 yourUsername tc001 77426528 Jan 16 18:50 dmel-all-r6.19.gtf
-rw-r--r-- 1 yourUsername tc001   721242 Jan 25  2016 dmel_unique_protein_is...
drwxrwxr-x 2 yourUsername tc001     4096 Jan 16 19:16 fastq
-rw-r--r-- 1 yourUsername tc001  1830516 Jan 25  2016 gene_association.fb.gz
-rw-rw-r-- 1 yourUsername tc001       15 Jan 16 19:17 test.txt
-rw-rw-r-- 1 yourUsername tc001      245 Jan 16 19:24 word_counts.txt</code></pre>
</div>
<p>That’s a huge amount of output: a full listing of everything in the
directory. Let’s see if we can understand <strong>what each field of a
given row represents</strong>, working left to right.</p>
<ol style="list-style-type: decimal">
<li>
<strong>Permissions:</strong> On the very left side, there is a
string of the characters <code>d</code>, <code>r</code>, <code>w</code>,
<code>x</code>, and <code>-</code>. The <code>d</code> indicates if
something is a directory (there is a <code>-</code> in that spot if it
is not a directory). The other <code>r</code>, <code>w</code>,
<code>x</code> bits indicate permission to <strong>R</strong>ead,
<strong>W</strong>rite, and e<strong>X</strong>ecute a file. There are
three fields of <code>rwx</code> permissions following the spot for
<code>d</code>. If a user is missing a permission to do something, it’s
indicated by a <code>-</code>.
<ul>
<li>The first set of <code>rwx</code> are the permissions that the owner
has (in this case the owner is <code>yourUsername</code>).</li>
<li>The second set of <code>rwx</code>s are permissions that other
members of the owner’s group share (in this case, the group is named
<code>tc001</code>).</li>
<li>The third set of <code>rwx</code>s are permissions that anyone else
with access to this computer can do with a file. Though files are
typically created with read permissions for everyone, typically the
permissions on your home directory prevent others from being able to
access the file in the first place.</li>
</ul>
</li>
<li>
<strong>References:</strong> This counts the number of references
(<a href="https://en.wikipedia.org/wiki/Hard_link" class="external-link">hard links</a>) to
the item (file, folder, symbolic link or “shortcut”).</li>
<li>
<strong>Owner:</strong> This is the username of the user who owns
the file. Their permissions are indicated in the first permissions
field.</li>
<li>
<strong>Group:</strong> This is the user group of the user who owns
the file. Members of this user group have permissions indicated in the
second permissions field.</li>
<li>
<strong>Size of item:</strong> This is the number of bytes in a
file, or the number of <a href="https://en.wikipedia.org/wiki/Block_(data_storage)" class="external-link">filesystem
blocks</a> occupied by the contents of a folder. (We can use the
<code>-h</code> option here to get a human-readable file size in
megabytes, gigabytes, etc.)</li>
<li>
<strong>Time last modified:</strong> This is the last time the file
was modified.</li>
<li>
<strong>Filename:</strong> This is the filename.</li>
</ol>
<p>So how do we change permissions? As I mentioned earlier, we need
permission to execute our script. Changing permissions is done with
<code>chmod</code>. To add executable permissions for all users we could
use this:</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="ex">$</span> chmod +x demo.sh</span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a><span class="ex">$</span> ls <span class="at">-l</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>-rw-rw-r-- 1 yourUsername tc001 12534006 Jan 16 18:50 bash-lesson.tar.gz
-rwxrwxr-x 1 yourUsername tc001       40 Jan 16 19:41 demo.sh
-rw-rw-r-- 1 yourUsername tc001 77426528 Jan 16 18:50 dmel-all-r6.19.gtf
-rw-r--r-- 1 yourUsername tc001   721242 Jan 25  2016 dmel_unique_protein_is...
drwxrwxr-x 2 yourUsername tc001     4096 Jan 16 19:16 fastq
-rw-r--r-- 1 yourUsername tc001  1830516 Jan 25  2016 gene_association.fb.gz
-rw-rw-r-- 1 yourUsername tc001       15 Jan 16 19:17 test.txt
-rw-rw-r-- 1 yourUsername tc001      245 Jan 16 19:24 word_counts.txt</code></pre>
</div>
<p>Now that we have executable permissions for that file, we can run
it.</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="ex">$</span> ./demo.sh</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Our script worked!</code></pre>
</div>
<p>Fantastic, we’ve written our first program! Before we go any further,
let’s learn how to take notes inside our program using comments. A
comment is indicated by the <code>#</code> character, followed by
whatever we want. Comments do not get run. Let’s try out some comments
in the console, then add one to our script!</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="co"># This won't show anything.</span></span></code></pre>
</div>
<p>Now lets try adding this to our script with <code>nano</code>. Edit
your script to look something like this:</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="co">#!/bin/bash</span></span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a></span>
<span id="cb13-3"><a href="#cb13-3" tabindex="-1"></a><span class="co"># This is a comment... they are nice for making notes!</span></span>
<span id="cb13-4"><a href="#cb13-4" tabindex="-1"></a><span class="bu">echo</span> <span class="st">"Our script worked!"</span></span></code></pre>
</div>
<p>When we run our script, the output should be unchanged from
before!</p>
</section><section><h2 class="section-heading" id="shell-variables">Shell variables<a class="anchor" aria-label="anchor" href="#shell-variables"></a>
</h2>
<hr class="half-width">
<p>One important concept that we’ll need to cover are shell variables.
Variables are a great way of saving information under a name you can
access later. In programming languages like Python and R, variables can
store pretty much anything you can think of. In the shell, they usually
just store text. The best way to understand how they work is to see them
in action.</p>
<p>To set a variable, simply type in a name containing only letters,
numbers, and underscores, followed by an <code>=</code> and whatever you
want to put in the variable. Shell variable names are often uppercase by
convention (but do not have to be).</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="ex">$</span> VAR=<span class="st">"This is our variable"</span></span></code></pre>
</div>
<p>To use a variable, prefix its name with a <code>$</code> sign. Note
that if we want to simply check what a variable is, we should use echo
(or else the shell will try to run the contents of a variable).</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="ex">$</span> echo <span class="va">$VAR</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>This is our variable</code></pre>
</div>
<p>Let’s try setting a variable in our script and then recalling its
value as part of a command. We’re going to make it so our script runs
<code>wc -l</code> on whichever file we specify with
<code>FILE</code>.</p>
<p>Our script:</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="co">#!/bin/bash</span></span>
<span id="cb17-2"><a href="#cb17-2" tabindex="-1"></a></span>
<span id="cb17-3"><a href="#cb17-3" tabindex="-1"></a><span class="co"># set our variable to the name of our GTF file</span></span>
<span id="cb17-4"><a href="#cb17-4" tabindex="-1"></a><span class="va">FILE</span><span class="op">=</span>dmel-all-r6.19.gtf</span>
<span id="cb17-5"><a href="#cb17-5" tabindex="-1"></a></span>
<span id="cb17-6"><a href="#cb17-6" tabindex="-1"></a><span class="co"># call wc -l on our file</span></span>
<span id="cb17-7"><a href="#cb17-7" tabindex="-1"></a><span class="fu">wc</span> <span class="at">-l</span> <span class="va">$FILE</span></span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a><span class="ex">$</span> ./demo.sh</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>542048 dmel-all-r6.19.gtf</code></pre>
</div>
<p>What if we wanted to do our little <code>wc -l</code> script on other
files without having to change <code>$FILE</code> every time we want to
use it? There is actually a special shell variable we can use in scripts
that allows us to use arguments in our scripts (arguments are extra
information that we can pass to our script, like the <code>-l</code> in
<code>wc -l</code>).</p>
<p>To use the first argument to a script, use <code>$1</code> (the
second argument is <code>$2</code>, and so on). Let’s change our script
to run <code>wc -l</code> on <code>$1</code> instead of
<code>$FILE</code>. Note that we can also pass all of the arguments
using <code>$@</code> (not going to use it in this lesson, but it’s
something to be aware of).</p>
<p>Our script:</p>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a><span class="co">#!/bin/bash</span></span>
<span id="cb20-2"><a href="#cb20-2" tabindex="-1"></a></span>
<span id="cb20-3"><a href="#cb20-3" tabindex="-1"></a><span class="co"># call wc -l on our first argument</span></span>
<span id="cb20-4"><a href="#cb20-4" tabindex="-1"></a><span class="fu">wc</span> <span class="at">-l</span> <span class="va">$1</span></span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a><span class="ex">$</span> ./demo.sh dmel_unique_protein_isoforms_fb_2016_01.tsv</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>22129 dmel_unique_protein_isoforms_fb_2016_01.tsv</code></pre>
</div>
<p>Nice! One thing to be aware of when using variables: they are all
treated as pure text. How do we save the output of an actual command
like <code>ls -l</code>?</p>
<p><strong>A demonstration of what doesn’t work:</strong></p>
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb23-1"><a href="#cb23-1" tabindex="-1"></a><span class="ex">$</span> TEST=ls <span class="at">-l</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>-bash: -l: command not found</code></pre>
</div>
<p><strong>What does work (we need to surround any command with
<code>$(command)</code>):</strong></p>
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb25-1"><a href="#cb25-1" tabindex="-1"></a><span class="ex">$</span> TEST=<span class="va">$(</span><span class="fu">ls</span> <span class="at">-l</span><span class="va">)</span></span>
<span id="cb25-2"><a href="#cb25-2" tabindex="-1"></a><span class="ex">$</span> echo <span class="va">$TEST</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>total 90372 -rw-rw-r-- 1 jeff jeff 12534006 Jan 16 18:50 bash-lesson.tar.gz -rwxrwxr-x. 1 jeff jeff 40 Jan 1619:41 demo.sh -rw-rw-r-- 1 jeff jeff 77426528 Jan 16 18:50 dmel-all-r6.19.gtf -rw-r--r-- 1 jeff jeff 721242 Jan 25 2016 dmel_unique_protein_isoforms_fb_2016_01.tsv drwxrwxr-x. 2 jeff jeff 4096 Jan 16 19:16 fastq -rw-r--r-- 1 jeff jeff 1830516 Jan 25 2016 gene_association.fb.gz -rw-rw-r-- 1 jeff jeff 15 Jan 16 19:17 test.txt -rw-rw-r-- 1 jeff jeff 245 Jan 16 19:24 word_counts.txt</code></pre>
</div>
<p>Note that everything got printed on the same line. This is a feature,
not a bug, as it allows us to use <code>$(commands)</code> inside lines
of script without triggering line breaks (which would end our line of
code and execute it prematurely).</p>
</section><section><h2 class="section-heading" id="loops">Loops<a class="anchor" aria-label="anchor" href="#loops"></a>
</h2>
<hr class="half-width">
<p>To end our lesson on scripts, we are going to learn how to write a
for-loop to execute a lot of commands at once. This will let us do the
same string of commands on every file in a directory (or other stuff of
that nature).</p>
<p>for-loops generally have the following syntax:</p>
<div class="codewrapper sourceCode" id="cb27">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb27-1"><a href="#cb27-1" tabindex="-1"></a><span class="co">#!/bin/bash</span></span>
<span id="cb27-2"><a href="#cb27-2" tabindex="-1"></a></span>
<span id="cb27-3"><a href="#cb27-3" tabindex="-1"></a><span class="cf">for</span> VAR <span class="kw">in</span> first second third</span>
<span id="cb27-4"><a href="#cb27-4" tabindex="-1"></a><span class="cf">do</span></span>
<span id="cb27-5"><a href="#cb27-5" tabindex="-1"></a>    <span class="bu">echo</span> <span class="va">$VAR</span></span>
<span id="cb27-6"><a href="#cb27-6" tabindex="-1"></a><span class="cf">done</span></span></code></pre>
</div>
<p>When a for-loop gets run, the loop will run once for everything
following the word <code>in</code>. In each iteration, the variable
<code>$VAR</code> is set to a particular value for that iteration. In
this case it will be set to <code>first</code> during the first
iteration, <code>second</code> on the second, and so on. During each
iteration, the code between <code>do</code> and <code>done</code> is
performed.</p>
<p>Let’s run the script we just wrote (I saved mine as
<code>loop.sh</code>).</p>
<div class="codewrapper sourceCode" id="cb28">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb28-1"><a href="#cb28-1" tabindex="-1"></a><span class="ex">$</span> chmod +x loop.sh</span>
<span id="cb28-2"><a href="#cb28-2" tabindex="-1"></a><span class="ex">$</span> ./loop.sh</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">first</span></span>
<span><span class="va">second</span></span>
<span><span class="va">third</span></span></code></pre>
</div>
<p>What if we wanted to loop over a shell variable, such as every file
in the current directory? Shell variables work perfectly in for-loops.
In this example, we’ll save the result of <code>ls</code> and loop over
each file:</p>
<div class="codewrapper sourceCode" id="cb30">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb30-1"><a href="#cb30-1" tabindex="-1"></a><span class="co">#!/bin/bash</span></span>
<span id="cb30-2"><a href="#cb30-2" tabindex="-1"></a></span>
<span id="cb30-3"><a href="#cb30-3" tabindex="-1"></a><span class="va">FILES</span><span class="op">=</span><span class="va">$(</span><span class="fu">ls</span><span class="va">)</span></span>
<span id="cb30-4"><a href="#cb30-4" tabindex="-1"></a><span class="cf">for</span> VAR <span class="kw">in</span> <span class="va">$FILES</span></span>
<span id="cb30-5"><a href="#cb30-5" tabindex="-1"></a><span class="cf">do</span></span>
<span id="cb30-6"><a href="#cb30-6" tabindex="-1"></a>   <span class="bu">echo</span> <span class="va">$VAR</span></span>
<span id="cb30-7"><a href="#cb30-7" tabindex="-1"></a><span class="cf">done</span></span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb31">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb31-1"><a href="#cb31-1" tabindex="-1"></a><span class="ex">$</span> ./loop.sh</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">bash</span><span class="op">-</span><span class="va">lesson.tar.gz</span></span>
<span><span class="va">demo.sh</span></span>
<span><span class="va">dmel_unique_protein_isoforms_fb_2016_01.tsv</span></span>
<span><span class="va">dmel</span><span class="op">-</span><span class="va">all</span><span class="op">-</span><span class="va">r6.19.gtf</span></span>
<span><span class="va">fastq</span></span>
<span><span class="va">gene_association.fb.gz</span></span>
<span><span class="va">loop.sh</span></span>
<span><span class="va">test.txt</span></span>
<span><span class="va">word_counts.txt</span></span></code></pre>
</div>
<p>There’s a shortcut to run on all files of a particular type, say all
<code>.gz</code> files:</p>
<div class="codewrapper sourceCode" id="cb33">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb33-1"><a href="#cb33-1" tabindex="-1"></a><span class="co">#!/bin/bash</span></span>
<span id="cb33-2"><a href="#cb33-2" tabindex="-1"></a></span>
<span id="cb33-3"><a href="#cb33-3" tabindex="-1"></a><span class="cf">for</span> VAR <span class="kw">in</span> <span class="pp">*</span>.gz</span>
<span id="cb33-4"><a href="#cb33-4" tabindex="-1"></a><span class="cf">do</span></span>
<span id="cb33-5"><a href="#cb33-5" tabindex="-1"></a>    <span class="bu">echo</span> <span class="va">$VAR</span></span>
<span id="cb33-6"><a href="#cb33-6" tabindex="-1"></a><span class="cf">done</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">bash</span><span class="op">-</span><span class="va">lesson.tar.gz</span></span>
<span><span class="va">gene_association.fb.gz</span></span></code></pre>
</div>
<div id="writing-our-own-scripts-and-loops" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="writing-our-own-scripts-and-loops" class="callout-inner">
<h3 class="callout-title">Writing our own scripts and loops</h3>
<div class="callout-content">
<p><code>cd</code> to our <code>fastq</code> directory from earlier and
write a loop to print off the name and top 4 lines of every fastq file
in that directory.</p>
<p>Is there a way to only run the loop on fastq files ending in
<code>_1.fastq</code>?</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<p>Create the following script in a file called
<code>head_all.sh</code></p>
<div class="codewrapper sourceCode" id="cb35">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb35-1"><a href="#cb35-1" tabindex="-1"></a><span class="co">#!/bin/bash</span></span>
<span id="cb35-2"><a href="#cb35-2" tabindex="-1"></a></span>
<span id="cb35-3"><a href="#cb35-3" tabindex="-1"></a><span class="cf">for</span> FILE <span class="kw">in</span> <span class="pp">*</span>.fastq</span>
<span id="cb35-4"><a href="#cb35-4" tabindex="-1"></a><span class="cf">do</span></span>
<span id="cb35-5"><a href="#cb35-5" tabindex="-1"></a>  <span class="bu">echo</span> <span class="va">$FILE</span></span>
<span id="cb35-6"><a href="#cb35-6" tabindex="-1"></a>  <span class="fu">head</span> <span class="at">-n</span> 4 <span class="va">$FILE</span></span>
<span id="cb35-7"><a href="#cb35-7" tabindex="-1"></a><span class="cf">done</span></span></code></pre>
</div>
<p>The “for” line could be modified to be
<code>for FILE in *_1.fastq</code> to achieve the second aim.</p>
</div>
</div>
</div>
</div>
<div id="concatenating-variables" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="concatenating-variables" class="callout-inner">
<h3 class="callout-title">Concatenating variables</h3>
<div class="callout-content">
<p>Concatenating (i.e. mashing together) variables is quite easy to do.
Add whatever you want to concatenate to the beginning or end of the
shell variable after enclosing it in <code>{}</code> characters.</p>
<div class="codewrapper sourceCode" id="cb36">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb36-1"><a href="#cb36-1" tabindex="-1"></a><span class="va">FILE</span><span class="op">=</span>stuff.txt</span>
<span id="cb36-2"><a href="#cb36-2" tabindex="-1"></a><span class="bu">echo</span> <span class="va">${FILE}</span>.example</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">stuff.txt.example</span></span></code></pre>
</div>
<p>Can you write a script that prints off the name of every file in a
directory with “.processed” added to it?</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" data-bs-parent="#accordionSolution2" aria-labelledby="headingSolution2">
<div class="accordion-body">
<p>Create the following script in a file called
<code>process.sh</code></p>
<div class="codewrapper sourceCode" id="cb38">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb38-1"><a href="#cb38-1" tabindex="-1"></a><span class="co">#!/bin/bash</span></span>
<span id="cb38-2"><a href="#cb38-2" tabindex="-1"></a></span>
<span id="cb38-3"><a href="#cb38-3" tabindex="-1"></a><span class="cf">for</span> FILE <span class="kw">in</span> <span class="pp">*</span></span>
<span id="cb38-4"><a href="#cb38-4" tabindex="-1"></a><span class="cf">do</span></span>
<span id="cb38-5"><a href="#cb38-5" tabindex="-1"></a>  <span class="bu">echo</span> <span class="va">${FILE}</span>.processed</span>
<span id="cb38-6"><a href="#cb38-6" tabindex="-1"></a><span class="cf">done</span></span></code></pre>
</div>
<p>Note that this will also print directories appended with
“.processed”. To truly only get files and not directories, we need to
modify this to use the <code>find</code> command to give us only files
in the current directory:</p>
<div class="codewrapper sourceCode" id="cb39">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb39-1"><a href="#cb39-1" tabindex="-1"></a><span class="co">#!/bin/bash</span></span>
<span id="cb39-2"><a href="#cb39-2" tabindex="-1"></a></span>
<span id="cb39-3"><a href="#cb39-3" tabindex="-1"></a><span class="cf">for</span> FILE <span class="kw">in</span> <span class="va">$(</span><span class="fu">find</span> . <span class="at">-max-depth</span> 1 <span class="at">-type</span> f<span class="va">)</span></span>
<span id="cb39-4"><a href="#cb39-4" tabindex="-1"></a><span class="cf">do</span></span>
<span id="cb39-5"><a href="#cb39-5" tabindex="-1"></a>    <span class="bu">echo</span> <span class="va">${FILE}</span>.processed</span>
<span id="cb39-6"><a href="#cb39-6" tabindex="-1"></a><span class="cf">done</span></span></code></pre>
</div>
<p>but this will have the side-effect of listing hidden files too.</p>
</div>
</div>
</div>
</div>
<div id="special-permissions" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="special-permissions" class="callout-inner">
<h3 class="callout-title">Special permissions</h3>
<div class="callout-content">
<p>What if we want to give different sets of users different
permissions. <code>chmod</code> actually accepts special numeric codes
instead of stuff like <code>chmod +x</code>. The numeric codes are as
follows: read = 4, write = 2, execute = 1. For each user we will assign
permissions based on the sum of these permissions (must be between 7 and
0).</p>
<p>Let’s make an example file and give everyone permission to do
everything with it.</p>
<div class="codewrapper sourceCode" id="cb40">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb40-1"><a href="#cb40-1" tabindex="-1"></a><span class="fu">touch</span> example</span>
<span id="cb40-2"><a href="#cb40-2" tabindex="-1"></a><span class="fu">ls</span> <span class="at">-l</span> example</span>
<span id="cb40-3"><a href="#cb40-3" tabindex="-1"></a><span class="fu">chmod</span> 777 example</span>
<span id="cb40-4"><a href="#cb40-4" tabindex="-1"></a><span class="fu">ls</span> <span class="at">-l</span> example</span></code></pre>
</div>
<p>How might we give ourselves permission to do everything with a file,
but allow no one else to do anything with it.</p>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3"> Show me the solution </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" data-bs-parent="#accordionSolution3" aria-labelledby="headingSolution3">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb41">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb41-1"><a href="#cb41-1" tabindex="-1"></a><span class="fu">chmod</span> 700 example</span></code></pre>
</div>
<p>We want all permissions so: 4 (read) + 2 (write) + 1 (execute) = 7
for user (first position), no permissions, i.e. 0, for group (second
position) and all (third position).</p>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>A shell script is just a list of bash commands in a text file.</li>
<li>To make a shell script file executable, run
<code>chmod +x script.sh</code>.</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.

use like [gitbash][gitbash]
 -->
</section></section>
</div>
    </main>
</div>
<!-- END  : inst/pkgdown/templates/content-extra.html -->

      </div>
<!--/div.row-->
      		<footer class="row footer mx-md-3"><hr>
<div class="col-md-6">
        <p>This lesson is subject to the <a href="CODE_OF_CONDUCT.html">Code of Conduct</a></p>
        <p>

        <a href="https://github.com/EPCCed/2024-10-30-hpc-shell-edinburgh/edit/main/README.md" class="external-link">Edit on GitHub</a>

	
        | <a href="https://github.com/EPCCed/2024-10-30-hpc-shell-edinburgh/blob/main/CONTRIBUTING.md" class="external-link">Contributing</a>
        | <a href="https://github.com/EPCCed/2024-10-30-hpc-shell-edinburgh/" class="external-link">Source</a></p>
				<p><a href="https://github.com/EPCCed/2024-10-30-hpc-shell-edinburgh/blob/main/CITATION" class="external-link">Cite</a> | <a href="mailto:support@archer2.ac.uk">Contact</a> | <a href="https://carpentries.org/about/" class="external-link">About</a></p>
			</div>
			<div class="col-md-6">

        <p>Materials licensed under <a href="LICENSE.html">CC-BY 4.0</a> by the authors</p>

        <p>Template licensed under <a href="https://creativecommons.org/licenses/by-sa/4.0/" class="external-link">CC-BY 4.0</a> by <a href="https://carpentries.org/" class="external-link">The Carpentries</a></p>
        <p>Built with <a href="https://github.com/carpentries/sandpaper/tree/0.16.10" class="external-link">sandpaper (0.16.10)</a>, <a href="https://github.com/carpentries/pegboard/tree/0.7.7" class="external-link">pegboard (0.7.7)</a>, and <a href="https://github.com/carpentries/varnish/tree/1.0.5" class="external-link">varnish (1.0.5)</a></p>
			</div>
		</footer>
</div> <!-- / div.container -->
	<div id="to-top">
		<a href="#top">
      <i class="search-icon" data-feather="arrow-up" role="img" aria-label="Back To Top"></i><br><!-- <span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top --><span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top
		</a>
	</div>
  <script type="application/ld+json">
    {
  "@context": "https://schema.org",
  "@type": "TrainingMaterial",
  "@id": "https://EPCCed.github.io/2024-10-30-hpc-shell-edinburgh/aio.html",
  "inLanguage": "en",
  "dct:conformsTo": "https://bioschemas.org/profiles/TrainingMaterial/1.0-RELEASE",
  "description": "A Carpentries Lesson teaching foundational data and coding skills to researchers worldwide",
  "keywords": "software, data, lesson, The Carpentries, HPC, EPCC",
  "name": "All in One View",
  "creativeWorkStatus": "active",
  "url": "https://EPCCed.github.io/2024-10-30-hpc-shell-edinburgh/aio.html",
  "identifier": "https://EPCCed.github.io/2024-10-30-hpc-shell-edinburgh/aio.html",
  "dateCreated": "2024-10-29",
  "dateModified": "2024-11-13",
  "datePublished": "2024-11-13"
}

  </script><script>
		feather.replace();
	</script>
</body>
</html><!-- END:   inst/pkgdown/templates/layout.html-->

